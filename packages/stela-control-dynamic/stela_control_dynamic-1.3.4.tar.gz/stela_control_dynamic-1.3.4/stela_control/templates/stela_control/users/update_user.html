{% extends 'stela_control/index.html' %}
{% load i18n %}
{% load static %}
{% load humanize %}
{% load crispy_forms_tags %}
{% block side_title %}
    {% if call == "subs" %}
        <h3 class="oxanium mx-4 text-end"><b>STELA {% trans "CONTROL DYNAMIC" %} | {% trans "Subscribers" %}</b></h3>
    {% else %}
        <h3 class="oxanium mx-4 text-end"><b>STELA {% trans "CONTROL DYNAMIC" %} | {% trans "Users Control" %}</b></h3>
    {% endif %}
{% endblock  %}
{% block title %}
{% if userdata.is_superuser is True %}
    <h1 class="h2 oxanium text-dark ml-3"><i class="fa-solid fa-user-shield color-stela"></i> {% trans "Superuser" %} # {{userdata.id}} {{userdata.username}} </h1>
{% else %}
    <h1 class="h2 oxanium text-dark ml-3"><i class="fa-solid fa-user color-stela"></i> {% trans "User" %} # {{userdata.id}} {{userdata.username}}</h1>
{% endif %}
{% endblock  %} 
{% block section_content %}
        <div class="row justify-content-center main-data wow fadeIn mt-5" ata-wow-duration="1s" data-wow-delay="0.5s">
            <div class="col-lg-6 mb-3">
                <div class="card p-0 ml-4">
                    <div class="card-body">
                        <div class="d-flex justify-content-end">
                            <small>{% trans "Last Login" %}: {{userdata.last_login|naturaltime}}</small>
                        </div>
                        <h3 class="fs-5">{% trans "Balance" %}</h3>
                        <ul>
                            {% if cloud.purchase > 0 %}
                                <li class="my-3">{% trans "Cloud" %}: <b class="fw-bold text-success">${{cloud.purchase}}</b> </li>
                            {% else %}
                                <li class="my-3">{% trans "Cloud" %}: <small class="text-red">{% trans "No Purchase Yet" %}</small></li>
                            {% endif %}
                            {% if stela.purchase > 0 %}
                                <li class="my-3">Stela: <b class="fw-bold text-success">${{stela.purchase}} </b></li>
                            {% else %}
                                <li class="my-3">Stela: <small class="text-red">{% trans "No Purchase Yet" %}</small> </li>
                            {% endif %}
                            {% if store.purchase > 0 %}
                                <li class="my-3">Store: <b class="fw-bold text-success">${{store.purchase}}</b> </li>
                            {% else %}
                                <li class="my-3">Store: <small class="text-red">{% trans "No Purchase Yet" %}</small> </li>
                            {% endif %}
                            {% if total.purchase > 0 %}
                                <h3 class="fs-4">{% trans "Total Purchase" %}: <b class="text-success">${{total.purchase}}</b></h3>
                            {% else %}
                            <h3 class="fs-4">{% trans "Total Purchase" %}: <b class="text-red">{% trans "No Purchase Yet" %}</b></h3>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3 mt-2">
                <ul class="no-list mx-4">
                    <li class="mb-3">
                        <button class="btn-block btn btn-shappire" data-bs-toggle="modal" data-bs-target="#profile" onclick="profileEdit()">{% trans "Edit Profile" %}</button>
                    </li>
                    <li class="mb-3">
                        <button class="btn-block btn btn-danger" onclick="closeAccount()">{% trans "Suspend Account" %}</button>
                    </li>
                </ul>
            </div>
            <div class="col-lg-10">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <h3 class="fs-5 oxanium pt-2 m-0">{% trans "Address" %}</h3>
                                <p class="m-0 p-0 text-dark">{{userdata.address}}</p>
                                <h3 class="fs-5 oxanium pt-2 m-0">{% trans "City" %}</h3>
                                <p class="m-0 p-0 text-dark">{{userdata.city_profile}}</p>
                                <h3 class="fs-5 oxanium pt-2 m-0">{% trans "Country" %}</h3>
                                <p class="m-0 p-0 text-dark">{{userdata.country_profile}}</p>
                            </div>
                            <div class="col-lg-6 text-right">
                                <ul>
                                    <li>{% trans "Full Name" %}: {{userdata.full_name}}</li>
                                    <li>{% trans "Phone" %}: {{userdata.phone_number}}</li>
                                    <li>{% trans "Email" %}: {{userdata.email}}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="profile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title oxanium" id="staticBackdropLabel">{% trans "Profile Edit" %}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body mid-modal-scroll form-cage d-none">  
                        <form action="" method="post" enctype="multipart/form-data" id="formUserData">
                            <div id="formContent">
                                
                                
                            </div> 
                            <div class="row justify-content-end">
                                <div class="col-lg-3">
                                    <button type="submit" class="btn btn-block btn-shappire oxanium form-btn-main d-flex justify-content-center align-items-center">{% trans "Send" %} <i class='bx bxs-send fs-4'></i></button>
                                </div>
                            </div>
                        </form>
                    </div>    
                    <div class="preload-cage-sendgrid vh-50 fade-in">
                        <h3 class="text-preload-sendgrid fs-6">{% trans "Proccess data, please wait" %}...</h3>
                    </div>
                </div>
            </div>
        </div>
{% endblock  %}
{% block scripts %}
    <script src="{% static 'js/stela/users/user-profile.js' %}"></script>
{% endblock  %}