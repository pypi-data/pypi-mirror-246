"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[855],{68855:(t,e,n)=>{n.r(e),n.d(e,{default:()=>M});var o=n(59835);const i={key:0,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},r={key:1,id:"preview-stream",style:{"background-image":'url("/aquisition/stream.mjpg")'},class:"full-width column justify-center content-center"},s=["innerHTML"],a={key:0},u={class:"q-gutter-sm"},l=(0,o._)("div",null,[(0,o.Uk)("Take"),(0,o._)("br"),(0,o.Uk)("Picture!")],-1),c=(0,o._)("div",null,[(0,o.Uk)("Create"),(0,o._)("br"),(0,o.Uk)("Collage!")],-1),g=(0,o._)("div",null,"Gallery",-1),d=(0,o._)("div",null,"Admin",-1);function m(t,e,n,m,h,p){const w=(0,o.up)("q-spinner-grid"),_=(0,o.up)("countdown-timer"),S=(0,o.up)("q-icon"),k=(0,o.up)("q-btn"),f=(0,o.up)("q-page-sticky"),y=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(y,{class:"q-pa-none column full-height"},{default:(0,o.w5)((()=>[t.showProcessing?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(w,{size:"20em"})])):(0,o.kq)("",!0),t.showPreview?((0,o.wg)(),(0,o.iD)("div",r,[t.showCountdownCounting?((0,o.wg)(),(0,o.j4)(_,{key:0,ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:t.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME},null,8,["duration","messageDuration"])):(0,o.kq)("",!0),t.showFrontpage?((0,o.wg)(),(0,o.iD)("div",{key:1,id:"frontpage_text",innerHTML:t.uiSettingsStore.uiSettings["FRONTPAGE_TEXT"]},null,8,s)):(0,o.kq)("",!0),(0,o.Wm)(f,{position:"bottom",offset:[0,25]},{default:(0,o.w5)((()=>[t.showFrontpage?((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",u,[t.uiSettingsStore.uiSettings.show_takepic_on_frontpage?((0,o.wg)(),(0,o.j4)(k,{key:0,color:"primary","no-caps":"",onClick:e[0]||(e[0]=e=>t.takePicture()),class:"action-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{left:"",name:"photo_camera"}),l])),_:1})):(0,o.kq)("",!0),t.uiSettingsStore.uiSettings.show_collage_on_frontpage?((0,o.wg)(),(0,o.j4)(k,{key:1,color:"primary","no-caps":"",onClick:e[1]||(e[1]=e=>t.takeCollage()),class:"action-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{left:"",name:"auto_awesome_mosaic"}),c])),_:1})):(0,o.kq)("",!0),t.uiSettingsStore.uiSettings.show_gallery_on_frontpage?((0,o.wg)(),(0,o.j4)(k,{key:2,color:"primary","no-caps":"",to:"/gallery",class:"action-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{left:"",name:"photo_library"}),g])),_:1})):(0,o.kq)("",!0),t.uiSettingsStore.uiSettings.show_admin_on_frontpage?((0,o.wg)(),(0,o.j4)(k,{key:3,color:"secondary","no-caps":"",to:"/admin",class:"action-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{left:"",name:"admin_panel_settings"}),d])),_:1})):(0,o.kq)("",!0)])])):(0,o.kq)("",!0)])),_:1})])):(0,o.kq)("",!0)])),_:1})}var h=n(91569),p=n(19302),w=n(67575),_=n(15639),S=n(96694),k=n(61957);const f={style:{width:"40%",height:"40%"}};function y(t,e,n,i,r,s){const a=(0,o.up)("q-circular-progress"),u=(0,o.up)("q-icon");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",f,[(0,o.wy)((0,o.Wm)(a,{"show-value":"",class:"text-light-blue",style:{width:"100%",height:"100%"},value:parseFloat(t.remainingSeconds.toFixed(1)),min:0,max:this.duration,reverse:"",size:"150px",color:"light-blue"},null,8,["value","max"]),[[k.F8,t.showCountdown]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(u,{name:t.icon,size:"200px",style:{width:"100%",height:"100%"}},null,8,["name"])],512),[[k.F8,t.showMessage]])],512)),[[k.F8,t.showBox]])}const v=(0,o.aZ)({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval((()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)}),50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},icon:{type:String,default:"ðŸ˜ƒ"}}});var b=n(11639),C=n(83302),q=n(22857),T=n(69984),P=n.n(T);const I=(0,b.Z)(v,[["render",y]]),Z=I;P()(v,"components",{QCircularProgress:C.Z,QIcon:q.Z});const j=(0,o.aZ)({components:{CountdownTimer:Z},setup(){(0,p.Z)();const t=(0,w.h)(),e=(0,_.B)(),n=(0,S.R)();return{store:t,stateStore:e,uiSettingsStore:n,remoteProcedureCall:h.remoteProcedureCall}},methods:{takePicture(){(0,h.remoteProcedureCall)("/processing/chose/1pic")},takeCollage(){(0,h.remoteProcedureCall)("/processing/chose/collage")}},watch:{},computed:{showProcessing:{get(){return"captures_completed"==this.stateStore.state}},showCountdownCounting:{get(){const t="counting"==this.stateStore.state;return this.stateStore.duration>0&&t}},showPreview:{get(){const t=!0,e="idle"==this.stateStore.state,n="counting"==this.stateStore.state;return t&&(e||n)}},showFrontpage:{get(){return"idle"==this.stateStore.state}}}});var x=n(69885),D=n(93040),F=n(30627),W=n(68879);const Q=(0,b.Z)(j,[["render",m]]),M=Q;P()(j,"components",{QPage:x.Z,QSpinnerGrid:D.Z,QPageSticky:F.Z,QBtn:W.Z,QIcon:q.Z})}}]);