"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[4034],{4113:function(e,n,t){t.d(n,{Z:function(){return z}});var r=t(45987),a=t(1413),i=t(29439),u=t(25525),o=t(61979),c=t(44507),l=t(19530),s=t(68096),d=t(47071),p=t(49900),f=t(90493),v=t(15021),h=t(20653),m=t(81918),Z=t(42763),g=t(27888),x=t(72791),y=t(73633),b=t(84648),k=t(48550),j=t(80184);function w(e){var n,t,r,u,o,c=(0,x.useState)(e.value||(null===e||void 0===e||null===(n=e.schema)||void 0===n?void 0:n.default)||""),l=(0,i.Z)(c,2),s=l[0],d=l[1],p=(0,x.useState)(((null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.enumOptions)||(null===e||void 0===e||null===(r=e.uiSchema)||void 0===r||null===(u=r["ui:options"])||void 0===u?void 0:u.enumOptions)||[]).map((function(e){return e.value}))),f=(0,i.Z)(p,2),v=f[0],h=f[1];return(0,x.useEffect)((function(){d(e.value)}),[e.value]),(0,j.jsx)(b.Z,{options:v,noOptionsText:"Enter to create a new option",getOptionLabel:function(e){return e},defaultValue:e.value||(null===e||void 0===e||null===(o=e.schema)||void 0===o?void 0:o.default)||v[0]||"",onInputChange:function(e,n){d(n)},renderInput:function(e){return(0,j.jsx)(k.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Select",variant:"standard",onKeyDown:function(e){"Enter"===e.key&&-1===v.findIndex((function(e){return e===s}))&&h((function(e){return e.concat(s)}))}}))},onChange:function(n,t){e.onChange(t)}})}var S=t(45609),C=t(39585),_=t(78535),O=["schema","uiSchema","formData","onChange","submitBtn","theme","validator","templates","widgets"],D=(0,o.Z)({spacing:2,typography:{fontSize:12},palette:{slider:{main:"#97afcf"}},components:{MuiTextField:{defaultProps:{variant:"outlined"},styleOverrides:{root:{"& .MuiOutlinedInput-root":{"& > fieldset":{border:"1px solid rgb(204, 204, 204)"}}}}},MuiInputBase:{defaultProps:{autoComplete:"off"},styleOverrides:{"& textarea":{border:"1px solid #ced4da"}}},MuiPaper:{styleOverrides:{root:{textAlign:"left","& .MuiTypography-root.MuiTypography-h5":{fontSize:"0.9rem",fontFamily:"Lato"},"& .MuiTypography-root.MuiTypography-subtitle2":{fontFamily:"Lato",color:"#666666",fontSize:"0.75rem"}}}},MuiSlider:{defaultProps:{size:"small",color:"slider"}},MuiSelect:{styleOverrides:{select:{textAlign:"left"}}},MuiFormControl:{styleOverrides:{root:{padding:"2px","& .MuiFormHelperText-root":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",textAlign:"left",margin:"2px"},"& .MuiFormHelperText-root.Mui-focused":{display:"block",overflow:"visible",textOverflow:"visible",whiteSpace:"normal"},"& .MuiFormControl-root:has(.MuiSlider-root) label":{fontSize:"0.75rem",textAlign:"start"}}}}}});function T(e){var n=e.id,t=e.children,r=e.classNames,a=e.style,u=e.disabled,o=e.displayLabel,c=e.hidden,p=e.label,f=e.onDropPropertyClick,v=e.onKeyChange,h=e.readonly,m=e.required,Z=e.rawErrors,g=void 0===Z?[]:Z,y=e.errors,b=e.help,k=e.rawDescription,w=e.schema,S=e.uiSchema,C=e.registry,_=(0,x.useState)(!1),O=(0,i.Z)(_,2),D=O[0],T=O[1],F=(0,l.LI)(S),M=(0,l.t4)("WrapIfAdditionalTemplate",C,F);return c?(0,j.jsx)("div",{style:{display:"none"},children:t}):(0,j.jsx)(M,{classNames:r,style:a,disabled:u,id:n,label:p,onDropPropertyClick:f,onKeyChange:v,readonly:h,required:m,schema:w,uiSchema:S,registry:C,children:(0,j.jsxs)(s.Z,{fullWidth:!0,error:!!g.length,required:m,onFocus:function(e){T(!0)},onBlur:function(e){T(!1)},children:[t,o&&k?(0,j.jsx)(d.Z,{id:n,focused:D,children:k}):null,y,b]})})}function F(e){var n=e.options,t=e.registry,r=(0,l.t4)("BaseInputTemplate",t,n),i=5;return"string"!==typeof n.rows&&"number"!==typeof n.rows||(i=n.rows),(0,j.jsx)(r,(0,a.Z)((0,a.Z)({sx:{"& .MuiOutlinedInput-root":{"& > fieldset":{border:"1px solid rgb(204, 204, 204)"}}}},e),{},{multiline:!0,rows:i,variant:"outlined"}))}function M(e){return(0,j.jsx)(w,(0,a.Z)({},e))}function I(e){return(0,j.jsx)(C.Z,(0,a.Z)({},e))}function N(e){var n=e.chat_message;if(n.content)return(0,j.jsx)(p.Z,{primary:n.content});if(n.function_call){var t=n.function_call.name,r=JSON.parse(n.function_call.arguments),a=Object.keys(r).map((function(e){return"".concat(e,'="').concat(r[e],'"')})).join(",");return(0,j.jsx)("div",{children:(0,j.jsx)(p.Z,{primary:"Function",secondary:"".concat(t,"(").concat(a,")")})})}return null}var P=function(e){var n=e.value||[],t=0;return"string"===typeof n&&(n=[{content:n}]),(0,j.jsx)(f.Z,{className:"output-chat",style:{paddingTop:0},children:n.map((function(e){return(0,j.jsxs)(v.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",background:"rgb(255, 250, 236)",border:"1px solid rgb(235, 230, 236)",borderRadius:10},children:[(0,j.jsx)(h.Z,{children:(0,j.jsx)(m.Z,{color:"primary",label:e.role||"System"})}),(0,j.jsx)(N,{chat_message:e})]},t++)}))})},A=function(e){var n=e.value||[],t=0;return(0,j.jsx)(f.Z,{className:"output-text",style:{paddingTop:0},children:n.map((function(e){return(0,j.jsx)(v.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",background:"rgb(255, 250, 236)",border:"1px solid rgb(235, 230, 236)",borderRadius:10},children:(0,j.jsx)(p.Z,{primary:e})},t++)}))})},L=function(e){var n=0;return(0,j.jsx)(Z.Z,{className:"output-image",cols:2,gap:8,children:e.value.map((function(e){return(0,j.jsx)(g.Z,{children:(0,j.jsx)("img",{src:"".concat(e),loading:"lazy",alt:""})},n++)}))})},E=function(e){return(0,j.jsx)("audio",{src:e.value,controls:!0})},z=function(e){var n=e.schema,t=e.uiSchema,i=e.formData,o=e.onChange,l=e.submitBtn,s=void 0===l?(0,j.jsx)("div",{}):l,d=e.theme,p=void 0===d?D:d,f=e.validator,v=e.templates,h=void 0===v?{}:v,m=e.widgets,Z=void 0===m?{datasource:function(e){return(0,j.jsx)(y.a,(0,a.Z)({multiple:!0},e))},output_chat:P,output_text:A,output_image:L,output_audio:E}:m,g=(0,r.Z)(e,O);return(0,j.jsx)(c.Z,{theme:p,children:(0,j.jsx)(u.ZP,(0,a.Z)((0,a.Z)({},g),{},{schema:n,uiSchema:t,validator:f,formData:i,onChange:o,templates:(0,a.Z)((0,a.Z)({},h),{},{FieldTemplate:T}),widgets:(0,a.Z)((0,a.Z)({},{customselect:M,TextareaWidget:F,FileWidget:I,datasource:function(e){return(0,j.jsx)(y.a,(0,a.Z)({multiple:!0},e))},password:function(e){return(0,j.jsx)(_.Z,(0,a.Z)({},e))},connection:function(e){return(0,j.jsx)(S.Z,(0,a.Z)({},e))}}),Z),children:s}))})}},45609:function(e,n,t){var r=t(1413),a=t(75330),i=t(12705),u=t(84648),o=t(48550),c=t(68096),l=t(80184);n.Z=function(e){var n=(0,a.sJ)(i.rN);return(0,l.jsx)(c.Z,{fullWidth:!0,children:(0,l.jsx)(u.Z,{id:"connection-selector",options:n,getOptionLabel:function(e){var t=n.find((function(n){return n.id===e}));return t?t.name:e.name?e.name:e},isOptionEqualToValue:function(e,n){return e&&n&&(e.id===n.id||e.id===n)},value:e.value,renderInput:function(e){return(0,l.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{variant:"outlined",label:"Connections",placeholder:"Connections"}))},onChange:function(n,t){e.onChange(null===t||void 0===t?void 0:t.id)}})})}},43070:function(e,n,t){t.d(n,{P:function(){return z}});var r=t(93433),a=t(29439),i=t(1413),u=t(72791),o=t(5574),c=t(65661),l=t(39157),s=t(36314),d=t(48550),p=t(2199),f=t(24518),v=t(97123),h=t(75330),m=t(12705),Z=t(7077),g=t(81156),x=t(4113),y=t(52803),b=t(45609),k=t(64554),j=t(80184);function w(e){var n;return(0,u.useEffect)((function(){window.gapi&&window.gapi.load("picker")}),[]),(0,j.jsx)(k.Z,{children:(null===e||void 0===e?void 0:e.connection)&&"google_oauth2"===(null===e||void 0===e||null===(n=e.connection)||void 0===n?void 0:n.connection_type_slug)&&(0,j.jsxs)(k.Z,{children:[(0,j.jsx)(f.Z,{variant:"contained",onClick:function(){var n,t=new window.google.picker.View(window.google.picker.ViewId.DOCS);null!==(n=e.schema)&&void 0!==n&&n.accepts&&t.setMimeTypes(Object.keys(e.schema.accepts).join(",")),(0,Z.o)().get("/api/connections/".concat(e.connection.id,"/access_token")).then((function(n){var r=n.data.access_token;(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.NAV_HIDDEN).addView(t).setOAuthToken(r).setCallback((function(n){n.action===window.google.picker.Action.PICKED&&e.onChange(n.docs)})).build().setVisible(!0)}))},children:"Choose a file"}),(0,j.jsx)(d.Z,{disabled:!0,variant:"standard",value:((null===e||void 0===e?void 0:e.value)||[]).map((function(e){return e.name})).join(", ")})]})})}function S(e){var n,t,r=(0,h.sJ)(m.rN);return(0,j.jsxs)("div",{children:[(0,j.jsx)(b.Z,{value:null!==e&&void 0!==e&&e.value?null===(n=JSON.parse(e.value))||void 0===n?void 0:n.connection_id:null,onChange:function(n){e.onChange(JSON.stringify({connection_id:n}))}}),(0,j.jsx)(w,{schema:e.schema,connection:r.find((function(n){var t;return n.id===(e.value?null===(t=JSON.parse(e.value))||void 0===t?void 0:t.connection_id:null)}))||null,value:null!==e&&void 0!==e&&e.value?null===(t=JSON.parse(e.value))||void 0===t?void 0:t.files:null,onChange:function(n){var t;e.onChange(JSON.stringify({connection_id:e.value?null===(t=JSON.parse(e.value))||void 0===t?void 0:t.connection_id:null,files:n}))}})]})}var C=t(63466),_=t(57482),O=t(90493),D=t(15021),T=t(13400),F=t(49900),M=t(50686),I=t(27247),N=t(39709);function P(e){var n=e.onChange,t=e.value,i=e.schema,o=(0,u.useState)(null),c=(0,a.Z)(o,2),l=c[0],p=c[1],f=(0,u.useState)(t?t.split(","):null),v=(0,a.Z)(f,2),h=v[0],m=v[1],g=(0,u.useState)(!1),x=(0,a.Z)(g,2),y=x[0],b=x[1],k=(0,u.useState)(null),w=(0,a.Z)(k,2),S=w[0],P=w[1];(0,u.useEffect)((function(){if(null!==h||null!==l){var e=h?h.join(","):l;n(e),e.length>i.maxLength&&P("Too many URLs"),e.length<i.maxLength&&P(null)}}),[h,n,i.maxLength,l]);return(0,j.jsxs)("div",{className:"container",children:[(0,j.jsx)("label",{style:{display:"flex"},children:e.label}),(0,j.jsx)("p",{}),(0,j.jsxs)(s.Z,{spacing:2,sx:{},children:[(0,j.jsx)(d.Z,{disabled:y,onChange:function(e){return p(e.target.value)},InputProps:{endAdornment:(0,j.jsx)(C.Z,{position:"end",children:(0,j.jsx)(N.Z,{onClick:function(){var e=l;m(null),b(!0),(0,Z.o)().post("/api/datasources/url/extract_urls",{url:e}).then((function(n){m(n.data.urls||[e]),b(!1)})).catch((function(n){m([e]),b(!1)}))},isLoading:y,disabled:y,children:(0,j.jsx)(M.Z,{})})})}}),y&&(0,j.jsx)(_.Z,{}),h&&h.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)(O.Z,{dense:!0,sx:{maxHeight:"200px",overflowY:"scroll",border:S?"1px solid red":null},children:h.map((function(e,n){return(0,j.jsx)(D.ZP,{secondaryAction:(0,j.jsx)(T.Z,{onClick:function(){var e=(0,r.Z)(h);e.splice(n,1),m(e)},children:(0,j.jsx)(I.Z,{})}),children:(0,j.jsx)(F.Z,{primary:(0,j.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:e})})},n)}))}),S&&(0,j.jsx)("p",{style:{color:"red"},children:S})]})]})]})}var A=t(35552);function L(e){return(0,j.jsx)(S,(0,i.Z)({},e))}function E(e){return(0,j.jsx)(P,(0,i.Z)({},e))}function z(e){var n=e.open,t=e.handleCancelCb,b=e.dataSourceAddedCb,k=e.modalTitle,w=void 0===k?"Add New Data Source":k,S=e.datasource,C=void 0===S?null:S,_=(0,h.sJ)(m.TF),O=(0,u.useState)(null!==C&&void 0!==C&&C.name?C.name:""),D=(0,a.Z)(O,2),T=D[0],F=D[1],M=(0,u.useState)(!1),I=(0,a.Z)(M,2),N=I[0],P=I[1],z=(0,h.FV)(m.NM),R=(0,a.Z)(z,2),V=R[0],B=R[1],U=(0,u.useState)(null!==C&&void 0!==C&&C.type?C.type:null===_||void 0===_?void 0:_[0]),J=(0,a.Z)(U,2),W=J[0],H=J[1],q=(0,u.useState)({}),K=(0,a.Z)(q,2),G=K[0],Y=K[1],Q=(0,y.lD)();return(0,j.jsxs)(o.Z,{open:n,onClose:t,sx:{zIndex:900},children:[(0,j.jsx)(c.Z,{children:w}),(0,j.jsx)(l.Z,{children:(0,j.jsxs)(s.Z,{spacing:2,children:[(0,j.jsx)(d.Z,{label:"Data Source Name",value:T,onChange:function(e){return F(e.target.value)},disabled:!!C,required:!0,defaultValue:(null===C||void 0===C?void 0:C.name)||"Untitled",size:"small",style:{width:"100%",marginTop:"6px"},error:N}),(0,j.jsx)("span",{children:"Data Source Type"}),(0,j.jsx)(p.Z,{variant:"outlined",size:"small",style:{display:"inline-block"},disabled:!!C,children:_.map((function(e){return(0,j.jsx)(f.Z,{variant:(null===W||void 0===W?void 0:W.id)===e.id?"contained":"outlined",onClick:function(n){H(e)},children:e.name},e.id)}))}),(0,j.jsx)(x.Z,{schema:(null===W||void 0===W?void 0:W.entry_config_schema)||{},validator:g.ZP,uiSchema:(0,i.Z)((0,i.Z)({},(null===W||void 0===W?void 0:W.entry_config_ui_schema)||{}),{"ui:submitButtonOptions":{norender:!0},"ui:DescriptionFieldTemplate":function(){return null},"ui:TitleFieldTemplate":function(){return null}}),widgets:{gdrive:L,webpageurls:E},formData:G,onChange:function(e){var n=e.formData;Y(n)}})]})}),(0,j.jsxs)(v.Z,{children:[(0,j.jsx)(f.Z,{onClick:t,children:"Cancel"}),",",(0,j.jsx)(f.Z,{variant:"contained",onClick:function(){if(C)(0,Z.o)().post("/api/datasources/".concat(C.uuid,"/add_entry"),{entry_data:G}).then((function(){Q()})),t(),(0,A.yv)("Processing Data, please refresh the page in a few minutes",{variant:"success"});else{if(""===T)return void P(!0);(0,Z.o)().post("/api/datasources",{name:T,type:W.id,config:W.is_external_datasource?G:{}}).then((function(e){if(!W.is_external_datasource){var n=e.data;B([].concat((0,r.Z)(V),[n])),(0,Z.o)().post("/api/datasources/".concat(n.uuid,"/add_entry"),{entry_data:G}).then((function(e){b(n)}))}})),t(),(0,A.yv)("Processing Data, please refresh the page in a few minutes",{variant:"success"})}},children:"Submit"})]})]})}},73633:function(e,n,t){t.d(n,{a:function(){return h}});var r=t(1413),a=t(93433),i=t(29439),u=t(72791),o=t(75330),c=t(12705),l=t(88141),s=t(43070),d=t(84648),p=t(48550),f=t(68096),v=t(80184);function h(e){var n=(0,o.sJ)(c.NM),t=(0,o.sJ)(c.c5),h=(0,u.useState)(!1),m=(0,i.Z)(h,2),Z=m[0],g=m[1],x=n.concat(t.filter((function(e){return!n.some((function(n){return n.uuid===e.uuid}))})));return(0,v.jsxs)(f.Z,{fullWidth:!0,children:[(0,v.jsx)(d.Z,{multiple:void 0===e.multiple||e.multiple,id:"datasource-selector",options:(0,a.Z)(x),getOptionLabel:function(e){var n=x.find((function(n){return n.uuid===e}));return n?n.name:e.name?e.name:e},isOptionEqualToValue:function(e,n){return e.uuid===n.uuid||e.uuid===n},value:e.value?"string"===typeof e.value&&e.multiple?[e.value]:e.value:[],renderInput:function(e){return(0,v.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{variant:"standard",label:"Data Sources",placeholder:"Data Sources"}))},onChange:function(n,t){Array.isArray(t)?e.onChange(t.map((function(e){return(null===e||void 0===e?void 0:e.uuid)||e}))):e.multiple?e.onChange([(null===t||void 0===t?void 0:t.uuid)||t]):e.onChange((null===t||void 0===t?void 0:t.uuid)||t)}}),(0,v.jsx)("button",{onClick:function(){return g(!0)},style:{backgroundColor:"#6287ac",color:"#fed766"},children:(0,v.jsx)(l.Z,{})}),(0,v.jsx)(s.P,{open:Z,handleCancelCb:function(){return g(!1)},dataSourceAddedCb:function(n){return e.onChange(n.uuid)}})]})}},39585:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(1413),a=t(93433),i=t(29439),u=t(72791),o=t(18267),c=t(19530),l=t(81918),s=t(82773),d=t(80184),p={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},f={borderColor:"#2196f3"},v={borderColor:"#00e676"},h={borderColor:"#ff1744"},m={marginTop:4};function Z(e,n){return null===e?null:e.replace(";base64",";name=".concat(encodeURIComponent(n),";base64"))}function g(e){var n=e.name,t=e.size,r=e.type;return new Promise((function(a,i){var u=new window.FileReader;u.onerror=i,u.onload=function(e){var i;"string"===typeof(null===(i=e.target)||void 0===i?void 0:i.result)?a({dataURL:Z(e.target.result,n),name:n,size:t,type:r}):a({dataURL:null,name:n,size:t,type:r})},u.readAsDataURL(e)}))}function x(e){return e.filter((function(e){return e})).map((function(e){var n=(0,c.OP)(e),t=n.blob;return{dataURL:e,name:n.name,size:t.size,type:t.type}}))}function y(e){var n,t,c=e.multiple,Z=e.onChange,y=e.value,b=(0,u.useMemo)((function(){return Array.isArray(y)?x(y):x([y])}),[y]),k=(0,u.useState)(b),j=(0,i.Z)(k,2),w=j[0],S=j[1],C=w.map((function(e,n){return(0,d.jsx)(l.Z,{label:e.name,onDelete:function(){return _(n)}},n)})),_=function(e){var n=(0,a.Z)(w);n.splice(e,1),S(n);var t=n.map((function(e){return e.dataURL}));Z(c?t:t[0])},O=(0,o.uI)({accept:(null===(n=e.schema)||void 0===n?void 0:n.accepts)||{},onDrop:function(n){var t;(t=n,Promise.all(Array.from(t).map(g))).then((function(n){var t,r;S(n);var a=n.map((function(e){return e.dataURL}));null!==e&&void 0!==e&&null!==(t=e.schema)&&void 0!==t&&t.multiple||(null===e||void 0===e||null===(r=e.schema)||void 0===r?void 0:r.maxFiles)>1?Z(a):Z(a[0])}))},multiple:e.schema.multiple||e.schema.maxFiles>1||!1,maxSize:e.schema.maxSize||2e7,maxFiles:e.schema.maxFiles||1}),D=O.getRootProps,T=O.getInputProps,F=O.isFocused,M=O.isDragAccept,I=O.isDragReject,N=(0,u.useMemo)((function(){return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},p),F?f:{}),M?v:{}),I?h:{})}),[F,M,I]);return(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("label",{style:{display:"flex"},children:e.label}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",(0,r.Z)((0,r.Z)({},D({style:N})),{},{children:[(0,d.jsx)("input",(0,r.Z)((0,r.Z)({},T()),{},{multiple:!1})),(0,d.jsxs)("p",{children:["Drag 'n' drop some files here, or click to select files. Maximum size of each file is ",(0,s.Z)((null===e||void 0===e||null===(t=e.schema)||void 0===t?void 0:t.maxSize)||2e7)]})]})),C&&(0,d.jsx)("aside",{style:m,children:C})]})}},78535:function(e,n,t){var r=t(1413),a=t(29439),i=t(72791),u=t(48550),o=t(63466),c=t(13400),l=t(3710),s=t(29569),d=t(80184);n.Z=function(e){var n=(0,i.useState)(!1),t=(0,a.Z)(n,2),p=t[0],f=t[1];return(0,d.jsx)(u.Z,(0,r.Z)((0,r.Z)({},e),{},{type:p?"text":"password",onChange:function(n){return e.onChange(n.target.value)},InputProps:{endAdornment:(0,d.jsx)(o.Z,{position:"end",children:(0,d.jsx)(c.Z,{onClick:function(){return f(!p)},"aria-label":"toggle secret visibility",children:p?(0,d.jsx)(l.Z,{fontSize:"small"}):(0,d.jsx)(s.Z,{fontSize:"small"})})})}}))}},12705:function(e,n,t){t.d(n,{$5:function(){return w},C_:function(){return L},DK:function(){return I},Dg:function(){return z},Hn:function(){return g},K4:function(){return k},MC:function(){return M},NM:function(){return D},TC:function(){return H},TF:function(){return F},YL:function(){return Z},c5:function(){return T},e7:function(){return V},eH:function(){return b},gZ:function(){return x},jl:function(){return m},lo:function(){return P},nC:function(){return _},pQ:function(){return j},r1:function(){return v},rN:function(){return W},rc:function(){return C},v:function(){return h},w1:function(){return U},ye:function(){return N}});var r=t(4942),a=t(1413),i=t(74165),u=t(15861),o=t(75330),c=t(7077),l=(0,o.nZ)({key:"apiProvidersFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/apiproviders");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),s=(0,o.nZ)({key:"apiBackendsFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/apibackends");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),d=(0,o.nZ)({key:"endpointsFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/endpoints");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),p=(0,o.nZ)({key:"dataSourcesFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/datasources");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),f=(0,o.nZ)({key:"dataSourceTypesFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/datasource_types");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),v=(0,o.cn)({key:"apiProviders",default:l}),h=(0,o.nZ)({key:"apiProviderDropdownList",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.get,e.next=3,t(v);case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.name}})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),m=(0,o.cn)({key:"apiProviderSelected",default:null}),Z=(0,o.cn)({key:"apiBackends",default:s}),g=(0,o.nZ)({key:"apiBackendDropdownList",get:function(e){var n=e.get,t=n(Z),r=n(V);return t.filter((function(e){return-1===((null===r||void 0===r?void 0:r.disabled_api_backends)||[]).indexOf(e.id)})).map((function(e){return{label:e.name,value:e.id,provider:e.api_provider.name}}))}}),x=(0,o.cn)({key:"apiBackendSelected",default:null}),y=(0,o.cn)({key:"endpoints",default:d}),b=((0,o.nZ)({key:"endpointDropdownList",get:function(e){var n=(0,e.get)(y);return n.filter((function(e){return 0===e.version&&!e.draft})).sort((function(e,n){return e.created_on<n.created_on?1:-1})).map((function(e){return{label:"".concat(e.api_backend.api_provider.name," \xbb ").concat(e.api_backend.name," \xbb ").concat(e.name),uuid:e.uuid,options:n.filter((function(n){return n.parent_uuid===e.uuid})).map((function(n){return{label:"".concat(n.version,": ").concat(n.description),value:"".concat(n.parent_uuid,":").concat(n.version),version:n.version,backend:e.api_backend.name,provider:e.api_backend.api_provider.name,is_live:n.is_live,uuid:n.uuid}}))}}))}}),(0,o.cn)({key:"endpointSelected",default:null})),k=((0,o.nZ)({key:"endpointTableData",get:function(e){for(var n=(0,e.get)(y).filter((function(e){return!e.draft})).sort((function(e,n){return e.created_on<n.created_on?1:-1})),t=n.filter((function(e){return 0===e.version})).reduce((function(e,n){var t=(0,r.Z)({},n.uuid,(0,a.Z)((0,a.Z)({},n),{},{versions:[],key:n.uuid}));return(0,a.Z)((0,a.Z)({},e),t)}),{}),i=n.filter((function(e){return 0!==e.version})),u=0;u<i.length;u++)i[u].parent_uuid in t&&t[i[u].parent_uuid].versions.push((0,a.Z)((0,a.Z)({},i[u]),{},{key:i[u].uuid}));return Object.values(t)}}),(0,o.cn)({key:"endpointVersions",default:[]}),(0,o.cn)({key:"endpointConfigValue",default:{}})),j=(0,o.cn)({key:"promptValues",default:{}}),w=(0,o.cn)({key:"inputValue",default:{}}),S=((0,o.cn)({key:"saveEndpointModalVisible",default:!1}),(0,o.cn)({key:"saveEndpointVersionModalVisible",default:!1}),(0,o.cn)({key:"shareEndpointModalVisible",default:!1}),(0,o.cn)({key:"endpointShareCodeValue",default:null}),(0,o.nZ)({key:"profileFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/profiles/me");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()})),C=(0,o.cn)({key:"profileValue",default:S}),_=(0,o.nZ)({key:"isLoggedIn",get:function(e){return null!==(0,e.get)(C)}}),O=(0,o.cn)({key:"promptHubState",default:[]}),D=((0,o.nZ)({key:"promptHubList",get:function(e){return(0,e.get)(O)}}),(0,o.cn)({key:"dataSourcesState",default:p})),T=(0,o.nZ)({key:"orgDataSourcesState",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.get,e.prev=1,t(z).IS_ORGANIZATION_MEMBER){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,(0,c.o)().get("/api/org/datasources");case 7:return r=e.sent,e.abrupt("return",r.data);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}()}),F=(0,o.cn)({key:"dataSourceTypesState",default:f}),M=(0,o.cn)({key:"dataSourceEntriesState",default:[]}),I=(0,o.cn)({key:"orgDataSourceEntriesState",default:[]}),N=(0,o.nZ)({key:"dataSourceEntriesTableData",get:function(e){var n=e.get,t=n(M),r=n(z);t=t.map((function(e){return(0,a.Z)({isUserOwned:!0},e)}));var i=r.IS_ORGANIZATION_MEMBER?n(I):[];i=i.map((function(e){return(0,a.Z)({isUserOwned:!1},e)}));var u=n(D),o=(u=u.map((function(e){return(0,a.Z)({isUserOwned:!0},e)}))).map((function(e){return e.uuid})),c=r.IS_ORGANIZATION_MEMBER?n(T):[];c=(c=c.map((function(e){return(0,a.Z)({isUserOwned:!1},e)}))).filter((function(e){return!o.includes(e.uuid)}));for(var l=[],s={},d={},p=0;p<t.length;p++)t[p].datasource.uuid in s?s[t[p].datasource.uuid].push(t[p]):s[t[p].datasource.uuid]=[t[p]];for(var f=0;f<i.length;f++)i[f].datasource.uuid in d?d[i[f].datasource.uuid].push(i[f]):d[i[f].datasource.uuid]=[i[f]];for(var v=0;v<u.length;v++)l.push((0,a.Z)((0,a.Z)({},u[v]),{data_source_entries:s[u[v].uuid]||[]}));for(var h=0;h<c.length;h++)l.push((0,a.Z)((0,a.Z)({},c[h]),{data_source_entries:d[c[h].uuid]||[]}));return l}}),P=(0,o.cn)({key:"isMobileState",default:window.innerWidth<768}),A=((0,o.cn)({key:"appTemplateState",default:null}),(0,o.cn)({key:"appDebugState",default:{}}),(0,o.nZ)({key:"appsFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/apps");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()})),L=(0,o.cn)({key:"appsState",default:A}),E=(0,o.nZ)({key:"profileFlagsFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/profiles/me/flags");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),z=(0,o.cn)({key:"profileFlagsState",default:E}),R=(0,o.nZ)({key:"organizationFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/org");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),V=(0,o.cn)({key:"organizationState",default:R}),B=(0,o.nZ)({key:"connectionTypesFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/connection_types");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),U=(0,o.cn)({key:"connectionTypesState",default:B}),J=(0,o.nZ)({key:"connectionsFetchSelector",get:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.o)().get("/api/connections");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}),W=(0,o.cn)({key:"connectionsState",default:J}),H=(0,o.cn)({key:"streamChunksState",default:{}})},7077:function(e,n,t){t.d(n,{o:function(){return i}});var r=t(31243),a=t(35552),i=function(){var e=r.Z.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"});return e.interceptors.response.use((function(e){return e}),(function(e){window.location.pathname.startsWith("/s/")||window.location.pathname.startsWith("/hub")||window.location.pathname.startsWith("/app/")||401!==e.response.status&&403!==e.response.status||(window.location.href="/login?redirectUrl="+window.location.pathname);try{(0,a.yv)("Error Occurred",{variant:"error"})}catch(n){}return Promise.reject(e)})),e}},52803:function(e,n,t){t.d(n,{B6:function(){return u},lD:function(){return o}});var r=t(75330),a=t(12705),i=t(7077);function u(){var e=(0,r.Zl)(a.NM);return function(){(0,i.o)().get("/api/datasources").then((function(n){e(n.data)})).catch((function(e){})).then({})}}function o(){var e=(0,r.Zl)(a.MC);return function(){(0,i.o)().get("/api/datasource_entries").then((function(n){e(n.data)})).catch((function(e){})).then({})}}}}]);
//# sourceMappingURL=4034.6e5b3253.chunk.js.map