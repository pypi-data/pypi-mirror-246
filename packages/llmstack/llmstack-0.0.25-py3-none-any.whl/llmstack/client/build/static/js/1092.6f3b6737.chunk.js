"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[1092],{6289:function(e,n,t){t.d(n,{s:function(){return s}});var i=t(68096),o=t(30829),r=t(58406),a=t(23786),l=t(80184);function s(e){return(0,l.jsx)("div",{children:(0,l.jsxs)(i.Z,{fullWidth:!0,children:[(0,l.jsx)(o.Z,{id:"app-select-label",children:"Select an App"}),(0,l.jsx)(r.Z,{labelId:"app-select-label",id:"app-select",value:e.value||"",label:"Select an application",onChange:function(n){return e.onChange(n.target.value)},variant:"filled",sx:{lineHeight:"0.5em"},children:e.apps.map((function(e){return(0,l.jsx)(a.Z,{value:e.published_uuid,children:e.name},e.published_uuid)}))})]})})}},58639:function(e,n,t){t.d(n,{Z:function(){return h}});var i=t(1413),o=t(81156),r=t(4113),a=t(6289),l=t(91275),s=t(75330),u=t(12705),c=t(64554),d=t(80184),p={properties:{job_name:{type:"string",title:"Job Name"},application:{type:"string",title:"Application",widget:"appselect"},frequency:{type:"string",title:"Frequency",widget:"frequencyPicker"}}},f={"ui:order":["job_name","application","frequency"],job_name:{"ui:description":"Enter a name for this job."},application:{"ui:description":"Application to run with this job.","ui:widget":"appselect"},frequency:{"ui:description":"Select a frequency to run the application.","ui:widget":"frequencyPicker"}};function h(e){var n=((0,s.sJ)(u.C_)||[]).filter((function(e){return e.published_uuid}));return(0,d.jsx)(c.Z,{sx:{width:"95%",margin:"5px"},children:(0,d.jsx)(r.Z,{schema:p,validator:o.ZP,uiSchema:(0,i.Z)((0,i.Z)({},f),{"ui:submitButtonOptions":{norender:!0}}),formData:e.value,onChange:function(t){var o=t.formData;e.onChange((0,i.Z)((0,i.Z)({},o),{},{appDetail:n.find((function(e){return e.published_uuid===(null===o||void 0===o?void 0:o.application)})),frequencyObj:null!==o&&void 0!==o&&o.frequency?JSON.parse((null===o||void 0===o?void 0:o.frequency)||"{}"):null}))},widgets:{appselect:function(e){return(0,d.jsx)(a.s,(0,i.Z)((0,i.Z)({},e),{},{apps:n,value:e.value}))},frequencyPicker:function(e){return(0,d.jsx)(l.Z,(0,i.Z)((0,i.Z)({},e),{},{value:e.value,id:"frequency-picker"}))}}})})}},91275:function(e,n,t){t.d(n,{Z:function(){return m}});var i=t(1413),o=(t(72791),t(64554)),r=t(68096),a=t(30829),l=t(58406),s=t(23786),u=t(48550),c=t(71652),d=t(10556),p=t(72426),f=t.n(p),h=t(30815),x=t(41985),v=t(80184);function m(e){var n=e.onChange,t=e.id,p=e.value,m=e.minStartTime,j=e.maxStartTime,Z=p?JSON.parse(p):null,b=function(e){n(JSON.stringify(e))};return(0,v.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,v.jsxs)(r.Z,{sx:{width:"120px"},children:[(0,v.jsx)(a.Z,{id:"".concat(t,"-label"),children:"Frequency"}),(0,v.jsxs)(l.Z,{labelId:"".concat(t,"-label"),id:t,label:"Frequency",value:(null===Z||void 0===Z?void 0:Z.type)||"",onChange:function(e){return b({type:e.target.value})},placeholder:"Select a frequency",variant:"filled",sx:{lineHeight:"0.5em"},children:[(0,v.jsx)(s.Z,{value:"run_once",children:"Run Once"}),(0,v.jsx)(s.Z,{value:"repeat",children:"Repeat"}),(0,v.jsx)(s.Z,{value:"cron",children:"Cron Job"})]})]}),"run_once"===(null===Z||void 0===Z?void 0:Z.type)&&(0,v.jsx)(c._,{dateAdapter:d.Q,children:(0,v.jsx)(h.x,{minDateTime:m,maxDateTime:j,timeSteps:{minutes:15},disablePast:!0,value:f()(null===Z||void 0===Z?void 0:Z.scheduled_time),onChange:function(e){b((0,i.Z)((0,i.Z)({},Z),{},{type:"run_once",start_date:e.format("YYYY-MM-DD"),start_time:e.format("HH:mm:ss"),scheduled_time:e}))},label:"Schedule Time"})}),"repeat"===(null===Z||void 0===Z?void 0:Z.type)&&(0,v.jsx)("div",{children:(0,v.jsxs)(c._,{dateAdapter:d.Q,children:[(0,v.jsx)(h.x,{minDateTime:m,maxDateTime:j,timeSteps:{minutes:15},disablePast:!0,value:f()(null===Z||void 0===Z?void 0:Z.scheduled_time),onChange:function(e){b((0,i.Z)((0,i.Z)({},Z),{},{type:"repeat",start_date:e.format("YYYY-MM-DD"),start_time:e.format("HH:mm:ss"),scheduled_time:e}))},label:"Schedule Start Time"}),(0,v.jsx)(u.Z,{label:"Repeat Interval (in days)",value:null===Z||void 0===Z?void 0:Z.interval,type:"number",onChange:function(e){return b((0,i.Z)((0,i.Z)({},Z),{},{type:"repeat",interval:e.target.value}))}}),(0,v.jsx)(x.M,{disablePast:!0,value:f()(null===Z||void 0===Z?void 0:Z.end_date,"YYYY-MM-DD"),onChange:function(e){b((0,i.Z)((0,i.Z)({},Z),{},{type:"repeat",end_date:e.format("YYYY-MM-DD")}))},label:"Schedule End Date"})]})}),"cron"===(null===Z||void 0===Z?void 0:Z.type)&&(0,v.jsxs)(c._,{dateAdapter:d.Q,children:[(0,v.jsx)(u.Z,{label:"Cron Job Expression",value:null===Z||void 0===Z?void 0:Z.cron_expression,onChange:function(e){return b((0,i.Z)((0,i.Z)({},Z),{},{type:"cron",cron_expression:e.target.value}))}}),(0,v.jsx)(x.M,{disablePast:!0,value:f()(null===Z||void 0===Z?void 0:Z.end_date,"YYYY-MM-DD"),onChange:function(e){b((0,i.Z)((0,i.Z)({},Z),{},{type:"cron",end_date:e.format("YYYY-MM-DD")}))},label:"Schedule End Date"})]})]})}},19036:function(e,n,t){t.d(n,{Z:function(){return w}});var i=t(93433),o=t(4942),r=t(1413),a=t(29439),l=t(72791),s=t(24518),u=t(64554),c=t(41973),d=t(5936),p=t(34265),f=t(91330),h=t(58419),x=t(94515),v=t(5003),m=t(77763),j=t(76106),Z=t(73495),b=t(21993),g=t(64721),y=t(7195),C=t(79825),_=t(35552),k=t(80184);function w(e){var n=e.columnData,t=e.rowData,w=e.onChange,S=(0,m.vE)().readString,D=(0,l.useState)({}),M=(0,a.Z)(D,2),Y=M[0],A=M[1],O=(0,l.useRef)(null),P=(0,l.useState)(null),T=(0,a.Z)(P,2),R=T[0],J=T[1];(0,l.useEffect)((function(){if(R){var e=new FileReader;e.onload=function(e){var t=e.target.result;S(t,{header:!0,worker:!0,complete:function(e){if(0===e.data.length)return(0,_.yv)("No data found in file",{variant:"warning"}),void J(null);var t=Object.keys(e.data[0]);if(t.length!==n.length)return(0,_.yv)("Headers do not match expected headers",{variant:"error"}),void J(null);t.forEach((function(e){if(!n.find((function(n){return n.headerName===e})))return(0,_.yv)("Headers do not match expected headers",{variant:"error"}),void J(null)}));for(var i=[],o=function(){var o=e.data[r];if(Object.keys(o).length!==t.length)return 1;var a={_id:r,_isNew:!0};n.forEach((function(e){a[e.field]=o[e.headerName]})),i.push(a)},r=0;r<e.data.length;r++)o();w(i)}})},e.readAsText(R)}}),[R,n,w,S]);var E=function(e){return function(){A((0,r.Z)((0,r.Z)({},Y),{},(0,o.Z)({},e,{mode:d.se.Edit})))}},q=function(e){return function(){A((0,r.Z)((0,r.Z)({},Y),{},(0,o.Z)({},e,{mode:d.se.View})))}},I=function(e){return function(){w(t.filter((function(n){return n._id!==e})))}},N=function(e){return function(){A((0,r.Z)((0,r.Z)({},Y),{},(0,o.Z)({},e,{mode:d.se.View,ignoreModifications:!0}))),t.find((function(n){return n._id===e}))._isNew&&w(t.filter((function(n){return n._id!==e})))}},z=function(){O.current.click()},H=function(e){var n=e.target.files[0];J(n)};return(0,k.jsx)(u.Z,{sx:{width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}},children:(0,k.jsx)(h._$,{rows:t,getRowId:function(e){return e._id},columns:[].concat((0,i.Z)(n),[{field:"actions",type:"actions",headerName:"Actions",width:100,cellClassName:"actions",flex:1,maxWidth:100,getActions:function(e){var n,t=e.id;return(null===(n=Y[t])||void 0===n?void 0:n.mode)===d.se.Edit?[(0,k.jsx)(x.u,{icon:(0,k.jsx)(b.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:q(t)}),(0,k.jsx)(x.u,{icon:(0,k.jsx)(g.Z,{}),label:"Cancel",className:"textPrimary",onClick:N(t),color:"inherit"})]:[(0,k.jsx)(x.u,{icon:(0,k.jsx)(y.Z,{}),label:"Edit",className:"textPrimary",onClick:E(t),color:"inherit"}),(0,k.jsx)(x.u,{icon:(0,k.jsx)(C.Z,{}),label:"Delete",onClick:I(t),color:"inherit"})]}}]),editMode:"row",autoHeight:!0,rowModesModel:Y,onRowModesModelChange:function(e){A(e)},onRowEditStop:function(e,n){e.reason===c.U.rowFocusOut&&(n.defaultMuiPrevented=!0)},processRowUpdate:function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{_isNew:!1});return w(t.map((function(t){return t._id===e._id?n:t}))),n},pageSizeOptions:[5,10],initialState:{pagination:{paginationModel:{pageSize:5}}},slots:{toolbar:function(e){var t=e.setRowModesModel;return(0,k.jsxs)(p.D,{sx:{alignSelf:"flex-end"},children:[(0,k.jsx)(s.Z,{color:"primary",startIcon:(0,k.jsx)(j.Z,{}),type:"file",variant:"contained",onClick:z,size:"small",children:"Upload CSV"}),(0,k.jsx)("input",{type:"file",accept:".csv",onChange:H,ref:O,style:{display:"none"}}),(0,k.jsx)(s.Z,{color:"secondary",startIcon:(0,k.jsx)(Z.Z,{}),onClick:function(){var e=(0,v.kb)(),a={_id:e,_isNew:!0};n.forEach((function(e){a[e.field]=" "})),w((function(e){return[].concat((0,i.Z)(e),[a])})),t((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,o.Z)({},e,{mode:d.se.Edit,fieldToFocus:n[0].field}))}))},variant:"contained",size:"small",children:"Add Record"}),(0,k.jsx)(f.Zh,{csvOptions:{includeColumnGroupsHeaders:!1,fileName:"input_data"},printOptions:{disableToolbarButton:!0}})]})}},slotProps:{toolbar:{setRowModesModel:A}}})})}},41092:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne}});var i=t(1413),o=t(93433),r=t(29439),a=t(72791),l=t(5574),s=t(65661),u=t(39157),c=t(51691),d=t(97123),p=t(24518),f=t(81918),h=t(64554),x=t(13400),v=t(61889),m=t(79836),j=t(56890),Z=t(35855),b=t(53994),g=t(53382),y=t(56125),C=t(20068),_=t(16088),k=t(72426),w=t.n(k),S=t(7077),D=t(75330),M=t(12705),Y=t(35552),A=t(36314),O=t(20890),P=t(94721),T=t(58639),R=t(19036),J=t(80184);function E(e){var n,t=(0,a.useState)([]),o=(0,r.Z)(t,2),u=o[0],c=o[1],f=(0,a.useState)({}),h=(0,r.Z)(f,2),x=h[0],m=h[1],j=(0,a.useState)([]),Z=(0,r.Z)(j,2),b=Z[0],g=Z[1];return(0,a.useEffect)((function(){if(null!==x&&void 0!==x&&x.appDetail){var e=null===x||void 0===x?void 0:x.appDetail.data.input_fields.map((function(e){return{field:e.name,headerName:e.title,width:"text"===e.type?300:200,disableColumnMenu:!0,sortable:!1,editable:!0,flex:1}}));c(e),g([])}}),[x]),(0,J.jsxs)(l.Z,{open:!0,maxWidth:"lg",fullWidth:!0,onClose:e.onClose,children:[(0,J.jsx)(s.Z,{children:"Schedule App Run Job"}),(0,J.jsxs)(v.ZP,{children:[(0,J.jsx)(v.ZP,{item:!0,xs:12,children:(0,J.jsx)(A.Z,{sx:{alignItems:"start",margin:"5px"},children:(0,J.jsx)(T.Z,{onChange:function(e){m(e)},value:x})})}),(null===x||void 0===x?void 0:x.frequency)&&(null===x||void 0===x?void 0:x.job_name)&&(0,J.jsx)(v.ZP,{item:!0,xs:12,sx:{margin:"10px"},children:(0,J.jsxs)(A.Z,{sx:{alignItems:"start",margin:"5px"},children:[(0,J.jsx)(O.Z,{variant:"h7",sx:{marginLeft:"2px"},children:"Batch Input to the App"}),(0,J.jsx)(P.Z,{}),(0,J.jsx)(O.Z,{variant:"caption",sx:{marginLeft:"2px"},children:"Enter the input data for the app run. You can also upload a CSV file with the input data. Make sure the column names match the input fields of the app."}),(0,J.jsx)("br",{}),null!==x&&void 0!==x&&x.appDetail?(0,J.jsx)(R.Z,{columnData:u,rowData:b,onChange:function(e){g(e)}}):(0,J.jsx)("strong",{children:"Please select an application."})]})})]}),(0,J.jsx)(d.Z,{children:(0,J.jsx)(p.Z,{variant:"contained",color:"primary",disabled:!(null!==x&&void 0!==x&&null!==(n=x.appDetail)&&void 0!==n&&n.uuid&&null!==x&&void 0!==x&&x.frequencyObj&&b&&b.length>0),onClick:function(){var e,n=b.map((function(e){var n=(0,i.Z)({},e);return delete n._id,delete n._isNew,n}));(0,S.o)().post("/api/jobs/app_run",{job_name:null===x||void 0===x?void 0:x.job_name,app_uuid:null===x||void 0===x||null===(e=x.appDetail)||void 0===e?void 0:e.uuid,frequency:null===x||void 0===x?void 0:x.frequencyObj,app_run_data:n}).then((function(e){(0,Y.yv)("Successfully Scheduled App Run",{variant:"success"}),window.location.href="/jobs"})).catch((function(e){var n,t;null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.message&&(0,Y.yv)(e.response.data.message,{variant:"error"})}))},children:"Submit"})})]})}var q=t(58054),I=t(52601),N=t(78439),z=t(63162),H=t(56638),F=t(80342),W=t(2199),B=t(41),L=t(13208),V=t(35527),Q=t(31378),U=t(25028),G=t(23786),$=t(26759);function K(e){var n,t,o=e.options,l=e.sx,s=(0,a.useState)(!1),u=(0,r.Z)(s,2),c=u[0],d=u[1],f=(0,a.useRef)(null),h=(0,a.useState)(0),x=(0,r.Z)(h,2),v=x[0],m=x[1],j=function(e){f.current&&f.current.contains(e.target)||d(!1)};return(0,J.jsxs)(a.Fragment,{children:[(0,J.jsxs)(W.Z,{variant:"contained",ref:f,"aria-label":"split button",sx:l,children:[(0,J.jsx)(p.Z,{onClick:function(){o[v].onClick()},sx:{textTransform:"none"},startIcon:(null===(n=o[v])||void 0===n?void 0:n.startIcon)||null,children:null===(t=o[v])||void 0===t?void 0:t.title}),(0,J.jsx)(p.Z,{size:"small","aria-controls":c?"split-button-menu":void 0,"aria-expanded":c?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){d((function(e){return!e}))},children:(0,J.jsx)($.Z,{})})]}),(0,J.jsx)(B.Z,{sx:{zIndex:50},open:c,anchorEl:f.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var n=e.TransitionProps,t=e.placement;return(0,J.jsx)(L.Z,(0,i.Z)((0,i.Z)({},n),{},{style:{transformOrigin:"bottom"===t?"center top":"center bottom"},children:(0,J.jsx)(V.Z,{children:(0,J.jsx)(Q.Z,{onClickAway:j,children:(0,J.jsx)(U.Z,{id:"split-button-menu",autoFocusItem:!0,children:o.map((function(e,n){return(0,J.jsx)(G.Z,{disabled:!0===(null===o||void 0===o?void 0:o.isDisabled),selected:n===v,onClick:function(e){return function(e,n){m(n),d(!1)}(0,n)},children:e.title},e.key)}))})})})}))}})]})}function X(e){var n=e.open,t=e.onOk,i=e.onCancel,o=e.title,r=e.text;return(0,J.jsxs)(l.Z,{title:o||"Logged Out",open:n,onCancel:i,children:[(0,J.jsx)(s.Z,{id:"delete-modal-title",children:o}),(0,J.jsx)(u.Z,{children:(0,J.jsx)(c.Z,{children:r})}),(0,J.jsxs)(d.Z,{children:[(0,J.jsx)(p.Z,{onClick:i,children:"Cancel"},"cancel"),",",(0,J.jsx)(p.Z,{variant:"contained",type:"primary",onClick:t,children:"Confirm"},"submit"),","]})]})}function ee(e){var n=e.modalType,t=e.open,i=e.onCancel,o=e.onOk,r=e.jobId;switch(n){case"delete":return(0,J.jsx)(X,{id:"delete-job",open:t,onOk:function(){(0,S.o)().delete("/api/jobs/".concat(r)).then((function(e){window.location.reload()})).catch((function(e){(0,Y.yv)(e.message,{variant:"error"})})).finally((function(){o()}))},onCancel:i,title:"Delete Job",text:"Are you sure you want to delete this job?"});case"pause":return(0,J.jsx)(X,{id:"pause-job",open:t,onOk:function(){(0,S.o)().post("/api/jobs/".concat(r,"/pause")).then((function(e){window.location.reload()})).catch((function(e){(0,Y.yv)(e.message,{variant:"error"})})).finally((function(){o()}))},onCancel:i,title:"Pause Job",text:"Are you sure you want to pause this job?"});case"resume":return(0,J.jsx)(X,{id:"resume-job",open:t,onOk:function(){(0,S.o)().post("/api/jobs/".concat(r,"/resume")).then((function(e){window.location.reload()})).catch((function(e){(0,Y.yv)(e.message,{variant:"error"})})).finally((function(){o()}))},onCancel:i,title:"Resume Job",text:"Are you sure you want to resume this job?"});case"run":return(0,J.jsx)(X,{id:"run-job",open:t,onOk:function(){(0,S.o)().post("/api/jobs/".concat(r,"/run")).then((function(e){window.location.reload()})).catch((function(e){(0,Y.yv)(e.message,{variant:"error"})})).finally((function(){o()}))},onCancel:i,title:"Run Job",text:"Are you sure you want to run this job now?"});default:return null}}function ne(){var e=(0,D.sJ)(M.C_),n=(0,a.useState)(1),t=(0,r.Z)(n,2),l=t[0],s=t[1],u=(0,a.useState)([]),c=(0,r.Z)(u,2),d=c[0],k=c[1],Y=(0,a.useState)(!1),A=(0,r.Z)(Y,2),O=A[0],P=A[1],T=(0,a.useState)(null),R=(0,r.Z)(T,2),W=R[0],B=R[1],L=(0,a.useState)(null),V=(0,r.Z)(L,2),Q=V[0],U=V[1],G=(0,a.useState)(!1),$=(0,r.Z)(G,2),X=$[0],ne=$[1],te=function(){B(null),U(null),P(!1)},ie=function(e){var n,t,i,o,r,a,l,s,u=null===(n=e.result)||void 0===n||null===(t=n.filter((function(e){return"success"===e.status})))||void 0===t?void 0:t.length,c=null===(i=e.result)||void 0===i||null===(o=i.filter((function(e){return"failed"===e.status})))||void 0===o?void 0:o.length,d=null===(r=e.result)||void 0===r||null===(a=r.filter((function(e){return"started"===e.status})))||void 0===a?void 0:a.length,p=null===(l=e.result)||void 0===l?void 0:l.filter((function(e){return"not_started"===e.status})).length,f=null===(s=e.result)||void 0===s?void 0:s.length;return(0,J.jsxs)("div",{children:[(0,J.jsxs)("div",{children:["Total Rows: ",f]}),u&&f!==u?(0,J.jsxs)("div",{children:[(0,J.jsx)("br",{}),"Success: ",u]}):null,c?(0,J.jsxs)("div",{children:["Failed: ",c]}):null,d?(0,J.jsxs)("div",{children:["Started: ",d]}):null,p?(0,J.jsxs)("div",{children:["Pending: ",p]}):null]})},oe=[{title:"Name",key:"name"},{title:"Type",key:"model",render:function(e,n){return(0,J.jsxs)("div",{children:[(0,J.jsx)(f.Z,{label:function(){switch(e){case"ScheduledJob":return"Scheduled";case"RepeatableJob":return"Repeatable";case"CronJob":return"Cron";default:return null}}(),color:"secondary",size:"small"}),(0,J.jsx)(f.Z,{label:function(){switch(null===n||void 0===n?void 0:n.task_category){case"app_run":return"App";case"datasource_refresh":return"Datasource";default:return null}}(),color:"primary",size:"small"})]})}},{title:"Source",key:"source_uuid",render:function(n,t){var i;return"app_run"===(null===t||void 0===t?void 0:t.task_category)?(0,J.jsx)(p.Z,{onClick:function(){window.location.href="/apps/".concat(n)},sx:{textTransform:"none",fontWeight:"inherit",textAlign:"left"},children:null===(i=e.find((function(e){return e.uuid===n})))||void 0===i?void 0:i.name}):null}},{title:"Status",key:"enabled",render:function(e,n){return n?(0,J.jsx)(f.Z,{label:"Enabled",color:"success",size:"small"}):(0,J.jsx)(f.Z,{label:"Disabled",color:"error",size:"small"})}},{title:"Action",key:"operation",render:function(e,n){return(0,J.jsxs)(h.Z,{children:[(0,J.jsx)(x.Z,{onClick:function(){U(n.uuid),B("run"),P(!0)},color:"primary",children:(0,J.jsx)(F.Z,{})}),"ScheduledJob"!==(null===n||void 0===n?void 0:n.model)?null!==n&&void 0!==n&&n.enabled?(0,J.jsx)(x.Z,{onClick:function(){U(n.uuid),B("pause"),P(!0)},color:"primary",children:(0,J.jsx)(z.Z,{})}):(0,J.jsx)(x.Z,{onClick:function(){U(n.uuid),B("resume"),P(!0)},color:"primary",children:(0,J.jsx)(H.Z,{})}):null,(0,J.jsx)(x.Z,{onClick:function(){U(n.uuid),B("delete"),P(!0)},color:"primary",children:(0,J.jsx)(I.Z,{})})]})}}];return(0,a.useEffect)((function(){(0,S.o)().get("/api/jobs").then((function(e){var n,t=e.data.scheduled_jobs.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{model:"ScheduledJob",expand:!1})})),r=e.data.repeatable_jobs.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{model:"RepeatableJob",expand:!1})})),a=e.data.cron_jobs.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{model:"CronJob",expand:!1})}));n=[].concat((0,o.Z)(t),(0,o.Z)(r),(0,o.Z)(a)).sort((function(e,n){return w().utc(n.created_at).local()-w().utc(e.created_at).local()})),k(n)}))}),[]),(0,J.jsxs)("div",{id:"schedule-page",style:{marginBottom:"120px"},children:[(0,J.jsxs)(v.ZP,{span:24,style:{padding:"10px"},children:[(0,J.jsx)(v.ZP,{item:!0,style:{width:"100%",padding:"15px 0px"},children:(0,J.jsx)(K,{options:[{key:1,title:"App Run Job",startIcon:(0,J.jsx)(q.Z,{}),onClick:function(){ne(!0)}}],sx:{float:"left",marginBottom:"10px",textTransform:"none"}})}),(0,J.jsxs)(v.ZP,{item:!0,style:{width:"100%"},children:[(0,J.jsxs)(m.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,J.jsx)(j.Z,{children:(0,J.jsx)(Z.Z,{children:oe.map((function(e){return(0,J.jsx)(b.Z,{sx:{paddingLeft:"name"===e.key?"20px":"inherit",textAlign:"name"===e.key?"left":"center"},children:(0,J.jsx)("strong",{children:e.title})},e.key)}))})}),(0,J.jsx)(g.Z,{children:d.map((function(e){var n;return[(0,J.jsx)(Z.Z,{sx:{cursor:"pointer",backgroundColor:"inherit"},onClick:function(){"app_run"===e.task_category&&function(e){var n=(0,o.Z)(d),t=n.findIndex((function(n){return n.uuid===e.uuid}));n[t].expand=!n[t].expand,k(n),n[t].expand&&(0,S.o)().get("/api/jobs/".concat(e.uuid,"/tasks")).then((function(n){var t=(0,o.Z)(d),i=t.findIndex((function(n){return n.uuid===e.uuid}));t[i].tasks=n.data,k(t)}))}(e)},children:oe.map((function(n){var t=e[n.key];return(0,J.jsx)(b.Z,{align:n.align,sx:{fontWeight:"inherit",textAlign:"name"===n.key?"left":"center"},children:n.render?n.render(t,e):t},n.key)}))},e.uuid),(0,J.jsx)(Z.Z,{children:(0,J.jsx)(b.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:(0,J.jsx)(y.Z,{in:e.expand,timeout:"auto",unmountOnExit:!0,children:(0,J.jsx)(h.Z,{sx:{margin:1},children:(0,J.jsxs)(m.Z,{size:"small","aria-label":"tasks",children:[(0,J.jsx)(j.Z,{children:(0,J.jsxs)(Z.Z,{children:[(0,J.jsx)(b.Z,{children:(0,J.jsx)("strong",{children:"Created At"})}),(0,J.jsx)(b.Z,{children:(0,J.jsx)("strong",{children:"Status"})}),(0,J.jsx)(b.Z,{children:(0,J.jsx)("strong",{children:"Actions"})})]})}),(0,J.jsx)(g.Z,{children:null===(n=e.tasks)||void 0===n?void 0:n.map((function(n){var t,i,o;return(0,J.jsxs)(Z.Z,{children:[(0,J.jsx)(b.Z,{children:w().utc(n.created_at).local().format("D-MMM-YYYY h:mm:ss A")}),(0,J.jsx)(b.Z,{children:(0,J.jsx)(C.Z,{title:ie(n),children:"started"===n.status&&(null===(t=n.result)||void 0===t||null===(i=t.filter((function(e){return"success"===e.status})))||void 0===i?void 0:i.length)===(null===(o=n.result)||void 0===o?void 0:o.length)?(0,J.jsx)(f.Z,{label:"Finished",color:"success",size:"small"}):"started"===n.status?(0,J.jsx)(f.Z,{label:"Started",color:"warning",size:"small"}):(0,J.jsx)(f.Z,{label:"Failed",color:"error",size:"small"})})}),(0,J.jsx)(b.Z,{children:(0,J.jsx)(p.Z,{variant:"outlined",size:"small",startIcon:(0,J.jsx)(N.Z,{}),disabled:"failed"===n.status,onClick:function(){window.open("/api/jobs/".concat(e.uuid,"/tasks/").concat(n.uuid,"/download"))},sx:{textTransform:"none"},children:"Download"})})]},n.uuid)}))})]})})})})},"".concat(e.uuid,"_details"))]}))})]}),d.length>0&&(0,J.jsx)(_.Z,{variant:"outlined",shape:"rounded",page:l,onChange:function(e,n){s(n)},sx:{marginTop:2,float:"right"}})]})]}),O&&(0,J.jsx)(ee,{open:O,modalType:W,onCancel:te,jobId:Q,onOk:te}),X&&(0,J.jsx)(E,{open:X,onClose:function(){return ne(!1)}})]})}}}]);
//# sourceMappingURL=1092.6f3b6737.chunk.js.map