"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[2045],{82400:function(e,n,i){i.d(n,{Z:function(){return h}});var o=i(1413),t=i(61889),r=i(94721),l=i(89673),a=i(55818),s=i(3721),u=i(81131),d=i(19530),c=i(80184);function p(e){var n=e.properties,i=e.disabled,o=e.readonly,r=e.uiSchema,l=e.schema,a=e.formData,s=e.onAddClick,u=e.registry,p=u.templates.AddButton;return(0,c.jsxs)(t.ZP,{container:!0,spacing:2,style:{marginTop:"10px"},children:[n.map((function(e,n){return e.hidden?e.content:(0,c.jsx)(t.ZP,{item:!0,xs:12,style:{marginBottom:"10px"},children:e.content},n)})),(0,d.Rc)(l,r,a)&&(0,c.jsx)(t.ZP,{container:!0,justifyContent:"flex-end",children:(0,c.jsx)(t.ZP,{item:!0,children:(0,c.jsx)(p,{className:"object-property-expand",onClick:s(l),disabled:i||o,uiSchema:r,registry:u})})})]})}function v(e){var n=e.properties,i=e.uiSchema,t=[],d=[];return n.forEach((function(e){i[e.name]&&"ui:advanced"in i[e.name]&&!i[e.name]["ui:advanced"]?t.push(e):d.push(e)})),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(p,(0,o.Z)({},(0,o.Z)((0,o.Z)({},e),{},{properties:t}))),(0,c.jsx)(r.Z,{style:{margin:"16px 0"}}),d.length>0&&(0,c.jsxs)(l.Z,{children:[(0,c.jsx)(a.Z,{expandIcon:(0,c.jsx)(u.Z,{}),children:(0,c.jsx)("strong",{style:{marginLeft:"5px"},children:"Advanced"})}),(0,c.jsx)(s.Z,{children:(0,c.jsx)(p,(0,o.Z)({},(0,o.Z)((0,o.Z)({},e),{},{properties:d})))})]})]})}function h(e){var n=e.idSchema;return"root"===(null===n||void 0===n?void 0:n.$id)?(0,c.jsx)(v,(0,o.Z)({},e)):(0,c.jsx)(p,(0,o.Z)({},e))}},41383:function(e,n,i){i.d(n,{D1:function(){return y},ZP:function(){return b}});var o=i(29439),t=i(1413),r=i(72791),l=(i(38399),i(90493)),a=i(15021),s=i(94070),u=i(64554),d=i(43896),c=i(13239),p=i(83449),v=i(47283),h=i(82851),m=(i(73905),i(92205),i(61979)),f=i(81156),x=i(4113),g=i(67438),Z=i(80184),j=(0,m.Z)({typography:{fontFamily:"Lato, sans-serif",fontSize:14,color:"#000"},components:{MuiFormControl:{styleOverrides:{root:{"& .Mui-disabled":{color:"#000"}}}},MuiImageList:{styleOverrides:{root:{width:"100% !important",height:"100% !important"}}},MuiListItemText:{styleOverrides:{root:{whiteSpace:"pre-wrap"}}},MuiImageListItem:{styleOverrides:{img:{width:"auto",height:"auto"}}}}});function y(e){var n,i=(null===(n=e.runError)||void 0===n?void 0:n.errors)||e.runError||[];return(0,Z.jsx)(l.Z,{children:i.map((function(e){return(0,Z.jsx)(a.ZP,{children:(0,Z.jsx)(s.Z,{severity:"error",children:e})},e)}))})}function S(e){var n=(0,t.Z)({},e.formData||{});return null!==n&&void 0!==n&&n.api_response&&delete n.api_response,Object.keys((null===e||void 0===e?void 0:e.formData)||{}).length>0?(0,Z.jsx)(x.Z,{validator:f.ZP,schema:e.schema,uiSchema:e.uiSchema,formData:n,readonly:!0,theme:j,className:"output-form"}):(0,Z.jsx)(g.H,{emptyMessage:"No output"})}function b(e){var n=r.useState("form"),i=(0,o.Z)(n,2),l=i[0],a=i[1];return(0,Z.jsx)(u.Z,{sx:{width:"100%"},children:(0,Z.jsxs)(p.ZP,{value:l,children:[(0,Z.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,Z.jsx)(v.Z,{onChange:function(e,n){a(n)},"aria-label":"Output form tabs",children:(0,Z.jsx)(d.Z,{label:"Output",value:"form"})})}),(0,Z.jsx)(h.Z,{value:"form",sx:{padding:"4px"},children:e.loading?(0,Z.jsx)(c.Z,{}):(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(S,(0,t.Z)({},e)),(0,Z.jsx)(y,(0,t.Z)({},e))]})})]})})}},67438:function(e,n,i){i.d(n,{H:function(){return s}});var o=i(45987),t=i(64554),r=i(20890),l=i(80184),a=["emptyImage","emptyMessage"];function s(e){var n=e.emptyImage,i=e.emptyMessage;(0,o.Z)(e,a);return(0,l.jsxs)(t.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#838383",children:[n||null,(0,l.jsx)(r.Z,{variant:"h6",children:i||"No data available"})]})}},52045:function(e,n,i){i.r(n),i.d(n,{default:function(){return T}});var o=i(29439),t=i(72791),r=i(24518),l=i(36314),a=i(94721),s=i(61889),u=i(64554),d=i(68096),c=i(30829),p=i(58406),v=i(23786),h=i(75330),m=i(12705),f=i(80184);function x(){var e=(0,h.sJ)(m.v),n=(0,h.sJ)(m.Hn),i=(0,h.sJ)(m.YL),r=(0,h.rb)(m.eH),l=(0,h.Zl)(m.K4),a=(0,h.rb)(m.$5),x=(0,h.rb)(m.K4),g=(0,h.FV)(m.jl),Z=(0,o.Z)(g,2),j=Z[0],y=Z[1],S=(0,h.FV)(m.gZ),b=(0,o.Z)(S,2),_=b[0],P=b[1];return(0,t.useEffect)((function(){_&&r()}),[_,r]),(0,t.useEffect)((function(){var e;!j&&i&&i.length>0?(y(null===(e=i.find((function(e){return"openai/chatgpt"===e.id})))||void 0===e?void 0:e.api_provider.name),P(i.find((function(e){return"openai/chatgpt"===e.id})))):!_&&j&&"Open AI"===j&&P(i.find((function(e){return"opennai/chatgpt"===e.id})))}),[i,_,j,P,y]),(0,f.jsx)(s.ZP,{item:!0,id:"apibackendselector",children:(0,f.jsxs)(s.ZP,{container:!0,direction:"row",children:[(0,f.jsx)(u.Z,{sx:{minWidth:150},children:(0,f.jsxs)(d.Z,{fullWidth:!0,children:[(0,f.jsx)(c.Z,{id:"select-api-provider-label",children:"API Provider"}),(0,f.jsx)(p.Z,{style:{width:"auto"},onChange:function(e){y(e.target.value),P(null),l({}),a()},value:j||"",label:"Select API Provider",children:e.map((function(e,n){return(0,f.jsx)(v.Z,{value:e.value,children:e.label},n)}))})]})}),j&&(0,f.jsx)(u.Z,{sx:{minWidth:150},children:(0,f.jsxs)(d.Z,{fullWidth:!0,children:[(0,f.jsx)(c.Z,{id:"select-api-backend-label",children:"API Backend"}),(0,f.jsx)(p.Z,{style:{width:150},onChange:function(e){P(i.find((function(n){return n.id===e.target.value}))),l({}),x(),a()},value:_?_.id:"",label:"Select API Backend",children:n.filter((function(e){return e.provider===j&&"Promptly App"!==e.label})).map((function(e,n){return(0,f.jsx)(v.Z,{value:e.value,children:e.label},n)}))})]})})]})})}var g=i(7077),Z=i(41383),j=i(1413),y=i(81156),S=i(4113),b=i(61979),_=i(43896),P=i(83449),M=i(47283),k=i(82851),C=i(67438),F=(0,b.Z)({spacing:2,typography:{fontSize:12},components:{MuiTextField:{defaultProps:{variant:"standard"}},MuiPaper:{styleOverrides:{root:{overflow:"scroll",textAlign:"left","& .MuiTypography-root.MuiTypography-h5":{font:"inherit",fontSize:"1rem",fontWeight:"600",margin:"0.5rem 0.2rem",color:"#757575"},"& .MuiTypography-root.MuiTypography-subtitle2":{fontSize:"0.75rem"},"& .MuiBox-root .form-group .MuiFormControl-root .MuiBox-root":{display:"None"},"& .MuiBox-root .form-group .MuiFormControl-root .MuiFormHelperText-root":{display:"block"},"& .MuiBox-root .form-group .MuiFormControl-root .MuiFormHelperText-root.Mui-focused":{display:"block"}}}},MuiSelect:{styleOverrides:{select:{textTransform:"capitalize"}}},MuiFormControl:{styleOverrides:{root:{padding:"2px","& .MuiFormHelperText-root":{textAlign:"left",margin:"2px"},"& .MuiFormControl-root:has(.MuiSlider-root) label":{fontSize:"0.75rem",textAlign:"start"}}}}}});function O(e){var n=(0,h.FV)(m.$5),i=(0,o.Z)(n,2),t=i[0],r=i[1];return(0,f.jsx)(S.Z,{schema:e.schema,uiSchema:e.uiSchema,formData:t,validator:y.ZP,onChange:function(e){var n=e.formData;r(n)},theme:F})}function I(e){var n,i,r,l=t.useState("form"),a=(0,o.Z)(l,2),s=a[0],d=a[1],c=e.schema?JSON.parse(JSON.stringify(e.schema)):{},p=e.uiSchema?JSON.parse(JSON.stringify(e.uiSchema)):{},v=null!==e&&void 0!==e&&null!==(n=e.schema)&&void 0!==n&&n.title?null===e||void 0===e||null===(i=e.schema)||void 0===i?void 0:i.title:"Input Form";return null!==e&&void 0!==e&&null!==(r=e.schema)&&void 0!==r&&r.title&&(c.title="",c.description=""),(0,f.jsx)(u.Z,{sx:{width:"100%"},children:(0,f.jsxs)(P.ZP,{value:s,children:[(0,f.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,f.jsx)(M.Z,{onChange:function(e,n){d(n)},"aria-label":"Config form tabs",children:(0,f.jsx)(_.Z,{label:v||"Input Form",value:"form"})})}),(0,f.jsx)(k.Z,{value:"form",sx:{padding:"4px"},children:0===Object.keys(e.schema).length?(0,f.jsx)(C.H,(0,j.Z)({},e)):(0,f.jsx)(O,{schema:c,uiSchema:p,submitBtn:e.submitBtn})})]})})}var w=i(38399),B=(i(66027),i(3478),i(82400));function N(e){var n=(0,h.FV)(m.K4),i=(0,o.Z)(n,2),t=i[0],r=i[1];return(0,f.jsx)(S.Z,{schema:e.schema,uiSchema:e.uiSchema,formData:t,onChange:function(e){var n=e.formData;r(n)},validator:y.ZP,templates:{ObjectFieldTemplate:B.Z},children:(0,f.jsx)("div",{})})}function A(){var e=(0,h.FV)(m.K4),n=(0,o.Z)(e,2),i=n[0],t=n[1];return(0,f.jsx)(w.ZP,{mode:"json",theme:"chrome",value:JSON.stringify(i,null,2),onChange:function(e){t(JSON.parse(e))},editorProps:{$blockScrolling:!0},setOptions:{useWorker:!1,showGutter:!1}})}function J(e){var n,i=t.useState("form"),r=(0,o.Z)(i,2),l=r[0],a=r[1],s=e.schema?JSON.parse(JSON.stringify(e.schema)):{};return null!==e&&void 0!==e&&null!==(n=e.schema)&&void 0!==n&&n.title&&(s.title=null,s.description=null),(0,f.jsx)(u.Z,{sx:{width:"100%"},children:(0,f.jsxs)(P.ZP,{value:l,children:[(0,f.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,f.jsxs)(M.Z,{onChange:function(e,n){a(n)},"aria-label":"Config form tabs",children:[(0,f.jsx)(_.Z,{label:"Config Form",value:"form"}),(0,f.jsx)(_.Z,{label:"JSON",value:"json"})]})}),(0,f.jsx)(k.Z,{value:"form",sx:{padding:"4px"},children:0===Object.keys(e.schema).length?(0,f.jsx)(C.H,(0,j.Z)({},e)):(0,f.jsx)(N,{schema:s,uiSchema:e.uiSchema})}),(0,f.jsx)(k.Z,{value:"json",sx:{padding:"4px"},children:0===Object.keys(e.schema).length?(0,f.jsx)(C.H,(0,j.Z)({},e)):(0,f.jsx)(A,(0,j.Z)({},e))})]})})}function T(){var e=(0,h.sJ)(m.nC),n=(0,h.FV)(m.$5),i=(0,o.Z)(n,1)[0],u=(0,h.FV)(m.gZ),d=(0,o.Z)(u,2),c=d[0],p=d[1],v=(0,h.FV)(m.eH),j=(0,o.Z)(v,2),y=j[0],S=j[1],b=(0,h.FV)(m.K4),_=(0,o.Z)(b,2),P=_[0],M=_[1],k=(0,h.FV)(m.pQ),C=(0,o.Z)(k,2),F=C[0],O=C[1],w=(0,t.useState)(""),B=(0,o.Z)(w,2),N=B[0],A=B[1],T=(0,t.useState)(""),D=(0,o.Z)(T,2),H=D[0],V=D[1],E=(0,t.useState)(!1),z=(0,o.Z)(E,2),K=z[0],L=z[1],W=(0,t.useState)(null),$=(0,o.Z)(W,2),R=$[0],G=$[1],Q=(0,t.useState)(null),Y=(0,o.Z)(Q,2),q=Y[0],U=Y[1],X=function(){return(0,f.jsx)(r.Z,{type:"primary",onClick:function(n){if(e)return V(""),L(!0),void(0,g.o)().post("/api/playground/run",{input:i,config:P,bypass_cache:!0,api_backend_slug:c.slug,api_provider_slug:c.api_provider.slug}).then((function(e){var n,i,o,t,r,l,a,s,u,d,c,p,v,h,m,f,x,g,Z,j,y,S,b,_,P,M,k,C,F,O,I,w,B,N,J,T,D;if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.errors&&(A(""),V(JSON.stringify(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.errors))),U(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.output),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&null!==(t=o.output)&&void 0!==t&&t.generations)A(null===e||void 0===e||null===(p=e.data)||void 0===p||null===(v=p.output)||void 0===v?void 0:v.generations);else if(null!==e&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&null!==(l=r.output)&&void 0!==l&&l.chat_completions){var H,E;A(null===e||void 0===e||null===(H=e.data)||void 0===H||null===(E=H.output)||void 0===E?void 0:E.chat_completions)}else{var z;A([null===e||void 0===e||null===(z=e.data)||void 0===z?void 0:z.output])}if(L(!1),void 0!==(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(s=a.output)||void 0===s||null===(u=s._response)||void 0===u||null===(d=u.api_response)||void 0===d?void 0:d.usage))if(void 0!==(null===e||void 0===e||null===(h=e.data)||void 0===h||null===(m=h.output)||void 0===m||null===(f=m._response)||void 0===f||null===(x=f.api_response)||void 0===x?void 0:x.usage.prompt_tokens)&&void 0!==(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(Z=g.output)||void 0===Z||null===(j=Z._response)||void 0===j||null===(y=j.api_response)||void 0===y?void 0:y.usage.completion_tokens))G("".concat(null===e||void 0===e||null===(M=e.data)||void 0===M||null===(k=M.output)||void 0===k||null===(C=k._response)||void 0===C||null===(F=C.api_response)||void 0===F?void 0:F.usage.total_tokens," (P").concat(null===e||void 0===e||null===(O=e.data)||void 0===O||null===(I=O.output)||void 0===I||null===(w=I._response)||void 0===w||null===(B=w.api_response)||void 0===B?void 0:B.usage.prompt_tokens," + C").concat(null===e||void 0===e||null===(N=e.data)||void 0===N||null===(J=N.output)||void 0===J||null===(T=J._response)||void 0===T||null===(D=T.api_response)||void 0===D?void 0:D.usage.completion_tokens,")"));else if(void 0!==(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(b=S.output)||void 0===b||null===(_=b._response)||void 0===_||null===(P=_.api_response)||void 0===P?void 0:P.usage.total_tokens)){var K,W,$,R;G(null===e||void 0===e||null===(K=e.data)||void 0===K||null===(W=K.output)||void 0===W||null===($=W._response)||void 0===$||null===(R=$.api_response)||void 0===R?void 0:R.usage.total_tokens)}})).catch((function(e){var n;console.error(e),V((null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)||"Failed to run given prompt"),L(!1)}))},variant:"contained",children:"Run"})};return(0,t.useEffect)((function(){G(null),A("")}),[p,S,M,O]),(0,t.useEffect)((function(){}),[P,F]),(0,f.jsx)("div",{id:"home-page",style:{height:"100%",overflow:"scroll",padding:"2px"},children:(0,f.jsxs)(l.Z,{spacing:2,divider:(0,f.jsx)(a.Z,{orientation:"horizontal",flexItem:!0}),sx:{width:"100%",height:"100%",paddingTop:"5px"},children:[(0,f.jsx)(x,{}),(0,f.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,f.jsx)(s.ZP,{item:!0,xs:12,md:4,sx:{height:"100%"},children:(0,f.jsxs)(l.Z,{spacing:2,children:[(0,f.jsx)("div",{style:{height:"10%"},children:(0,f.jsx)(I,{schema:c?c.input_schema:{},uiSchema:c?c.input_ui_schema:{},emptyMessage:"Select your API Backend to see the parameters"})}),(0,f.jsx)("div",{children:c&&(0,f.jsx)(X,{})})]})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,md:4,children:(0,f.jsx)(J,{schema:c?c.config_schema:{},uiSchema:c?c.config_ui_schema:{},formData:P,atomState:m.K4,emptyMessage:"Select your API Backend to see the parameters"})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,md:4,children:(0,f.jsx)(Z.ZP,{result:N,endpoint:y,loading:K,loadingTip:"Running the input...",runError:H,tokenCount:R,schema:(null===c||void 0===c?void 0:c.output_schema)||{},uiSchema:(null===c||void 0===c?void 0:c.output_ui_schema)||{},formData:q||{}})})]})]})})}}}]);
//# sourceMappingURL=2045.1af33207.chunk.js.map