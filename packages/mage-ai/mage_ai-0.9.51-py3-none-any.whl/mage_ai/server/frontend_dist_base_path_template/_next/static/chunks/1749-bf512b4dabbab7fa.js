"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1749],{55283:function(n,e,t){t.d(e,{HC:function(){return O},HS:function(){return A},IN:function(){return f},Kf:function(){return v},Nk:function(){return g},PB:function(){return b},PY:function(){return x},WC:function(){return p},fk:function(){return E},gE:function(){return y},j1:function(){return C},jv:function(){return j},nz:function(){return Z},oh:function(){return s},qn:function(){return m},t1:function(){return T},u2:function(){return h},y9:function(){return R}});var o=t(38626),r=t(44897),i=t(44425),c=t(42631),l=t(8059),d=t(70515),u=t(47041),a=t(91437),s=68,f=1.5*d.iI,p=3*d.iI;function h(n){var e=l.eW;return i.tf.CALLBACK===n?e=l.J:i.tf.CHART===n||i.tf.CONDITIONAL===n?e=l.Hv:i.tf.CUSTOM===n?e=l.AK:i.tf.DATA_EXPORTER===n?e=l.Sr:i.tf.DATA_LOADER===n?e=l.R2:i.tf.DBT===n?e=l.J:i.tf.EXTENSION===n?e=l.FI:i.tf.GLOBAL_DATA_PRODUCT===n?e=l.yr:i.tf.SCRATCHPAD===n?e=l.Hv:i.tf.SENSOR===n?e=l.rK:i.tf.MARKDOWN===n?e=l.RK:i.tf.TRANSFORMER===n&&(e=l.eW),e}function m(n,e){var t,o,c=((null===e||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.borders)||r.Z.borders).light,l=((null===e||void 0===e||null===(o=e.theme)||void 0===o?void 0:o.monotone)||r.Z.monotone).grey500,d=e||{},u=d.blockColor,a=d.isSelected,s=d.theme;return a?c=(s||r.Z).content.active:i.tf.TRANSFORMER===n||u===i.Lq.PURPLE?(c=(s||r.Z).accent.purple,l=(s||r.Z).accent.purpleLight):i.tf.DATA_EXPORTER===n||u===i.Lq.YELLOW?(c=(s||r.Z).accent.yellow,l=(s||r.Z).accent.yellowLight):i.tf.DATA_LOADER===n||u===i.Lq.BLUE?(c=(s||r.Z).accent.blue,l=(s||r.Z).accent.blueLight):i.tf.MARKDOWN===n?(c=(s||r.Z).accent.sky,l=(s||r.Z).accent.skyLight):i.tf.SENSOR===n||u===i.Lq.PINK?(c=(s||r.Z).accent.pink,l=(s||r.Z).accent.pinkLight):i.tf.DBT===n?(c=(s||r.Z).accent.dbt,l=(s||r.Z).accent.dbtLight):i.tf.EXTENSION===n||u===i.Lq.TEAL?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).teal,l=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).tealLight):i.tf.CALLBACK===n?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).rose,l=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).roseLight):i.tf.CONDITIONAL===n||i.tf.SCRATCHPAD===n||u===i.Lq.GREY||i.tf.CUSTOM===n&&!u?(c=(s||r.Z).content.default,l=(s||r.Z).accent.contentDefaultTransparent):i.tf.GLOBAL_DATA_PRODUCT!==n||u||(c=(s||r.Z).monotone.white,l=(s||r.Z).monotone.whiteTransparent),{accent:c,accentLight:l}}var v=(0,o.css)([""," "," "," "," "," "," ",""],(0,a.eR)(),(function(n){return!n.selected&&!n.hasError&&"\n    border-color: ".concat(m(n.blockType,n).accentLight,";\n  ")}),(function(n){return n.selected&&!n.hasError&&"\n    border-color: ".concat(m(n.blockType,n).accent,";\n  ")}),(function(n){return!n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.accent||r.Z.accent).negativeTransparent,";\n  ")}),(function(n){return n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.borders||r.Z.borders).danger,";\n  ")}),(function(n){return n.dynamicBlock&&"\n    border-style: dashed !important;\n  "}),(function(n){return n.dynamicChildBlock&&"\n    border-style: dotted !important;\n  "})),g=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],c.n_),x=o.default.div.withConfig({displayName:"indexstyle__HiddenBlockContainerStyle",componentId:"sc-s5rj34-1"})([""," border-radius:","px;border-style:",";border-width:","px;",""],v,c.n_,c.M8,c.mP,(function(n){return"\n    background-color: ".concat((n.theme||r.Z).background.content,";\n\n    &:hover {\n      border-color: ").concat(m(n.blockType,n).accent,";\n    }\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__HeaderHorizontalBorder",componentId:"sc-s5rj34-2"})(["",""],(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme||r.Z).borders.darkLight,";\n  ")})),Z=o.default.div.withConfig({displayName:"indexstyle__BlockHeaderStyle",componentId:"sc-s5rj34-3"})([""," border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:",";border-top-width:","px;border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding-bottom:","px;padding-top:","px;"," "," "," ",""],v,c.n_,c.n_,c.M8,c.mP,c.M8,c.mP,c.M8,c.mP,1*d.iI,1*d.iI,(function(n){return"\n    background-color: ".concat((n.theme||r.Z).background.dashboard,";\n  ")}),(function(n){return"undefined"!==typeof n.zIndex&&null!==n.zIndex&&"\n    z-index: ".concat(6+(n.zIndex||0),";\n  ")}),(function(n){return!n.noSticky&&"\n    // This is to hide the horizontal scrollbar in the block header when sideBySide is enabled,\n    // and the screen width is too small.\n    position: sticky;\n    top: -5px;\n  "}),(function(n){return n.noSticky&&"\n    ".concat((0,u.y$)(),"\n\n    overflow-x: auto;\n    overflow-y: visible;\n  ")})),A=o.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-s5rj34-4"})([""," "," ",""],(function(n){return!n.darkBorder&&"\n    border-bottom: 1px solid ".concat((n.theme.borders||r.Z.borders).darkLight,";\n  ")}),(function(n){return n.darkBorder&&"\n    border-bottom: 1px solid ".concat((n.theme.borders||r.Z.borders).medium,";\n  ")}),(function(n){return!n.noBackground&&"\n    background-color: ".concat((n.theme||r.Z).background.dashboard,";\n  ")})),j=o.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-5"})([""," border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;position:relative;"," "," "," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],v,c.M8,c.mP,c.M8,c.mP,(function(n){return"\n    background-color: ".concat((n.theme.background||r.Z.background).codeTextarea,";\n  ")}),(function(n){return!n.noPadding&&"\n    padding-bottom: ".concat(d.iI,"px;\n    padding-top: ").concat(d.iI,"px;\n  ")}),(function(n){return n.lightBackground&&"\n    background-color: ".concat((n.theme||r.Z).background.content,";\n  ")}),(function(n){return!n.hideBorderBottom&&"\n    border-bottom-left-radius: ".concat(c.n_,"px;\n    border-bottom-right-radius: ").concat(c.n_,"px;\n    border-bottom-style: ").concat(c.M8,";\n    border-bottom-width: ").concat(c.mP,"px;\n    overflow: hidden;\n  ")})),y=o.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-6"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:8;&:hover{"," .block-divider-inner{","}}"," "," "," ",""],2*d.iI,(function(n){return n.additionalZIndex>0&&"\n      z-index: ".concat(8+n.additionalZIndex,";\n    ")}),(function(n){return"\n        background-color: ".concat((n.theme.text||r.Z.text).fileBrowser,";\n      ")}),(function(n){return!n.height&&"\n    height: ".concat(2*d.iI,"px;\n  ")}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")}),(function(n){return!n.bottom&&"\n    bottom: ".concat(.5*d.iI,"px;\n  ")}),(function(n){return"undefined"!==typeof n.bottom&&"\n    bottom: ".concat(n.bottom,"px;\n  ")})),T=o.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-7"})(["height 1px;width:100%;position:absolute;z-index:-1;"," ",""],(function(n){return!n.top&&"\n    top: ".concat(1.5*d.iI,"px;\n  ")}),(function(n){return"undefined"!==typeof n.top&&"\n    top: ".concat(n.top,"px;\n  ")})),R=o.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-8"})([""," ",""],(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||r.Z.borders).medium,";\n    padding-left: ").concat(n.normalPadding?d.iI:s,"px;\n  ")}),(function(n){return!n.noMargin&&"\n    margin-bottom: ".concat(1*d.iI,"px;\n    padding-bottom: ").concat(1*d.iI,"px;\n  ")})),O=o.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-9"})(["bottom:","px;left:","px;position:absolute;"],1*d.iI,s),E=o.default.div.withConfig({displayName:"indexstyle__ScrollColunnsContainerStyle",componentId:"sc-s5rj34-10"})(["position:relative;",""],(function(n){return"\n    z-index: ".concat((null===n||void 0===n?void 0:n.zIndex)||1,";\n  ")})),C=o.default.div.attrs((function(n){var e=n.height,t=n.left,o=n.right,r=n.top;return{style:{position:"fixed",height:e,width:n.width,left:t,right:o,top:r,zIndex:(n.zIndex||0)+2}}})).withConfig({displayName:"indexstyle__ScrollColunnStyle",componentId:"sc-s5rj34-11"})([""])},91749:function(n,e,t){t.d(e,{Z:function(){return Y}});var o=t(82394),r=t(21831),i=t(82684),c=t(32013),l=t(98777),d=t(81769),u=t(44425),a=t(71180),s=t(15338),f=t(97618),p=t(55485),h=t(85854),m=t(75582),v=t(44085),g=t(38276),x=t(72473),b=t(38626),Z=t(44897),A=t(42631),j=t(55283),y=t(70515),T=t(47041),R=t(91437),O=(y.iI,b.default.div.withConfig({displayName:"indexstyle__AfterFooterStyle",componentId:"sc-1qjqori-0"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||Z.Z.background).panel,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1qjqori-1"})([""," border-style:solid;border-width:1px;position:relative;"," "," "," "," "," "," ",""],j.Kf,(function(n){return!n.noBorderRadiusTop&&"\n    border-top-left-radius: ".concat(A.n_,"px;\n    border-top-right-radius: ").concat(A.n_,"px;\n  ")}),(function(n){return n.noBorderRadiusTop&&"\n    border-top: none !important;\n  "}),(function(n){return!n.noBorderRadiusBottom&&"\n    border-bottom-left-radius: ".concat(A.n_,"px;\n    border-bottom-right-radius: ").concat(A.n_,"px;\n  ")}),(function(n){return n.noBorderRadiusBottom&&"\n    border-bottom: none !important;\n  "}),(function(n){return!n.noBackground&&"\n    background-color: ".concat((n.theme.background||Z.Z.background).panel,";\n  ")}),(function(n){return!n.borderColor&&"\n    border-color: ".concat((n.theme.borders||Z.Z.borders).light,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")}))),E=(b.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-1qjqori-2"})(["padding:","px;",""],y.cd*y.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||Z.Z.borders).light,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-1qjqori-3"})([""," "," ",""],(0,R.eR)(),(function(n){return!n.selected&&"\n    &:hover {\n      background-color: ".concat((n.theme.interactive||Z.Z.interactive).rowHoverBackground,";\n    }\n  ")}),(function(n){return n.selected&&"\n    background-color: ".concat((n.theme.background||Z.Z.background).codeTextarea,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__StreamGridGroupStyle",componentId:"sc-1qjqori-4"})(["position:absolute;"]),b.default.div.withConfig({displayName:"indexstyle__StreamGridGroupInnerStyle",componentId:"sc-1qjqori-5"})([""," overflow:auto;position:fixed;",""],T.w5,(function(n){return n.borderRight&&"\n    border-right: 1px solid ".concat((n.theme.borders||Z.Z.borders).light,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__StreamGridStyle",componentId:"sc-1qjqori-6"})(["border-radius:","px;padding:","px;margin:","px;"," "," "," "," ",""],A.n_,y.cd*y.iI,1*y.iI,(function(n){return!n.warning&&"\n    &:hover {\n      cursor: pointer;\n    }\n  "}),(function(n){return!n.selected&&!n.warning&&"\n    border: 1px solid ".concat((n.theme.borders||Z.Z.borders).light,";\n  ")}),(function(n){return n.warning&&!n.selected&&"\n    border: 1px solid ".concat((n.theme.accent||Z.Z.accent).warningTransparent,";\n  ")}),(function(n){return n.warning&&n.selected&&"\n    border: 1px solid ".concat((n.theme.accent||Z.Z.accent).warning,";\n  ")}),(function(n){return n.selected&&!n.warning&&"\n    background-color: ".concat((n.theme.background||Z.Z.background).panel,";\n    border: 1px solid ").concat((n.theme.borders||Z.Z.borders).contrast,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__BackgroundStyle",componentId:"sc-1qjqori-7"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||Z.Z.background).panel,";\n  ")})),b.default.div.withConfig({displayName:"indexstyle__ButtonContainerStyle",componentId:"sc-1qjqori-8"})(["bottom:0;position:fixed;z-index:1;"," ",""],(function(n){return"\n    background-color: ".concat((n.theme.background||Z.Z.background).panel,";\n    border-left: 1px solid ").concat((n.theme.borders||Z.Z.borders).light,";\n    border-right: 1px solid ").concat((n.theme.borders||Z.Z.borders).light,";\n    border-top: 1px solid ").concat((n.theme.borders||Z.Z.borders).light,";\n  ")}),(function(n){return n.width&&"\n    width: ".concat(n.width,"px;\n   ")}))),C=t(19452),I=t(30229),P=t(81728),_=t(3314),D=t(86735),S=t(28598);function k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function N(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?k(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var L=function(n){var e,t,o,r,i=n.index,c=n.permission,l=n.setPermissions,d=n.updatePermission;return(0,S.jsx)(O,{children:(0,S.jsx)(g.Z,{p:y.cd,children:(0,S.jsxs)(p.ZP,{alignItems:"flex-start",flexDirection:"row",children:[(0,S.jsx)(a.ZP,{iconOnly:!0,onClick:function(){return l((function(n){return(0,D.oM)(n,i)}))},children:(0,S.jsx)(x.x8,{})}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsxs)(p.ZP,{flexDirection:"column",children:[(0,S.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,S.jsx)(h.Z,{level:5,children:"Triggers"}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(p.ZP,{alignItems:"center",children:(0,S.jsx)(a.ZP,{beforeIcon:(0,S.jsx)(x.mm,{}),compact:!0,onClick:function(n){(0,_.j)(n),d(N(N({},c),{},{triggers:((null===c||void 0===c?void 0:c.triggers)||[]).concat({schedule_interval:"",schedule_type:"",uuid:""})}))},secondary:!0,small:!0,children:"Add trigger"})})]}),(null===c||void 0===c||null===(e=c.triggers)||void 0===e?void 0:e.length)>=1&&(0,S.jsx)(g.Z,{mt:y.cd,children:null===c||void 0===c||null===(t=c.triggers)||void 0===t?void 0:t.map((function(n,e){var t=n.schedule_interval,o=n.schedule_type,r=n.uuid;return(0,S.jsx)(g.Z,{mt:e>=1?1:0,children:(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(n){(0,_.j)(n);var t=(0,D.oM)((null===c||void 0===c?void 0:c.triggers)||[],e);d(N(N({},c),{},{triggers:t}))},children:(0,S.jsx)(x.x8,{})}),(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(v.Z,{compact:!0,onChange:function(n){var t,o=n.target.value,r=N({},c),i=N({},null===r||void 0===r||null===(t=r.triggers)||void 0===t?void 0:t[e]);i.schedule_type=o,r.triggers[e]=i,d(r)},placeholder:"Type",small:!0,value:o,children:Object.entries(I.Z4).map((function(n){var e=(0,m.Z)(n,2),t=e[0],o=e[1];return(0,S.jsx)("option",{value:t,children:(0,P.kC)(o())},t)}))}),(I.Xm.TIME===o||!o)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(v.Z,{compact:!0,monospace:!0,onChange:function(n){var t,o=n.target.value,r=N({},c),i=N({},null===r||void 0===r||null===(t=r.triggers)||void 0===t?void 0:t[e]);i.schedule_interval=o,r.triggers[e]=i,d(r)},placeholder:"Interval",small:!0,value:t,children:I.Wb.map((function(n){return(0,S.jsx)("option",{value:n,children:n},n)}))})]})]})},"permission-trigger-".concat(i,"-").concat(e,"-").concat(r))}))})]}),(0,S.jsx)(g.Z,{mr:y.Mq}),(0,S.jsxs)(p.ZP,{flexDirection:"column",children:[(0,S.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,S.jsx)(h.Z,{level:5,children:"Roles"}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(p.ZP,{alignItems:"center",children:(0,S.jsx)(a.ZP,{beforeIcon:(0,S.jsx)(x.mm,{}),compact:!0,onClick:function(n){(0,_.j)(n),d(N(N({},c),{},{roles:((null===c||void 0===c?void 0:c.roles)||[]).concat({role:"",uuid:""})}))},secondary:!0,small:!0,children:"Add role"})})]}),(null===c||void 0===c||null===(o=c.roles)||void 0===o?void 0:o.length)>=1&&(0,S.jsx)(g.Z,{mt:y.cd,children:null===c||void 0===c||null===(r=c.roles)||void 0===r?void 0:r.map((function(n,e){var t=n.role,o=n.uuid;return(0,S.jsx)(g.Z,{mt:e>=1?1:0,children:(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(n){(0,_.j)(n);var t=(0,D.oM)((null===c||void 0===c?void 0:c.roles)||[],e);d(N(N({},c),{},{roles:t}))},children:(0,S.jsx)(x.x8,{})}),(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(v.Z,{compact:!0,monospace:!0,onChange:function(n){var t,o=n.target.value,r=N({},c),i=N({},null===r||void 0===r||null===(t=r.roles)||void 0===t?void 0:t[e]);i.role=o,r.roles[e]=i,d(r)},placeholder:"Role",small:!0,value:t,children:C.Z3.map((function(n){return(0,S.jsx)("option",{value:n,children:n},n)}))})]})},"permission-role-".concat(i,"-").concat(e,"-").concat(o))}))})]})]})})})},w=t(30160),M=t(35576),B=t(17488),H=t(3917);function U(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?U(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Y=function(n){var e,t,m=n.blockInteractionsMapping,v=n.containerWidth,b=n.createInteraction,Z=n.interactions,A=n.interactionsMapping,j=n.isLoadingCreateInteraction,T=n.isLoadingUpdatePipelineInteraction,R=n.permissions,C=n.pipeline,I=n.pipelineInteraction,P=n.refAfterFooter,k=n.savePipelineInteraction,N=n.selectedBlock,U=n.setBlockInteractionsMapping,Y=n.setInteractionsMapping,K=n.setPermissions,W=n.setSelectedBlock,X=n.updatePipelineInteraction,F=(0,i.useRef)(null),z=(0,i.useRef)(null),G=(0,i.useRef)(null),V=(0,i.useState)(null),Q=V[0],J=V[1],$=(0,i.useState)(null),nn=$[0],en=$[1],tn=(0,i.useState)(!1),on=tn[0],rn=tn[1],cn=(0,i.useState)(null),ln=cn[0],dn=cn[1],un=(0,i.useState)(!1),an=un[0],sn=un[1],fn=(0,i.useState)(null),pn=(fn[0],fn[1]),hn=(0,i.useState)(null),mn=hn[0],vn=hn[1],gn=(0,i.useState)(null),xn=gn[0],bn=gn[1],Zn=(0,i.useMemo)((function(){return"undefined"!==typeof m?m:xn}),[m,xn]),An=(0,i.useMemo)((function(){return"undefined"!==typeof A?A:mn}),[A,mn]),jn=(0,i.useCallback)((function(n,e){return null!==e&&void 0!==e&&e.initialBootstrap||rn(!0),"undefined"!==typeof U?U(n):bn(n)}),[U,bn,rn]),yn=(0,i.useCallback)((function(n,e){return null!==e&&void 0!==e&&e.initialBootstrap||rn(!0),"undefined"!==typeof Y?Y(n):vn(n)}),[Y,vn,rn]),Tn=(0,i.useState)(null),Rn=Tn[0],On=Tn[1],En=(0,i.useCallback)((function(n,e,t,i){return jn((function(c){var l=(0,r.Z)((null===c||void 0===c?void 0:c[n])||[]);return null!==i&&void 0!==i&&i.remove?l=(0,D.oM)(l,e):l[e]=q(q({},l[e]),t),q(q({},c),{},(0,o.Z)({},n,l))}))}),[jn]),Cn=(0,i.useCallback)((function(n,e){en(Number(new Date)),null!==e&&void 0!==e&&e.initialBootstrap||rn(!0),"undefined"!==typeof K?K(n):On(n)}),[en,K,On,rn]),In=(0,i.useMemo)((function(){var n;return null===(n="undefined"!==typeof R?R:Rn)||void 0===n?void 0:n.map((function(n,e){var t=n.roles,o=n.triggers;return{roles:null===t||void 0===t?void 0:t.map((function(n,t){return{role:"string"===typeof n?n:null===n||void 0===n?void 0:n.role,uuid:"".concat(e,"-").concat(nn,"-").concat(t)}})),triggers:null===o||void 0===o?void 0:o.map((function(n,t){return q(q({},n),{},{uuid:"".concat(e,"-").concat(nn,"-").concat(t)})})),uuid:"".concat(e,"-").concat(nn)}}))}),[nn,R,Rn]),Pn=(0,i.useCallback)((function(){J(Number(new Date)),rn(!1)}),[J,rn]),_n=(0,i.useCallback)((function(){k?null===k||void 0===k||k().then((function(){return Pn()})):null===X||void 0===X||X(q(q({},I),{},{blocks:Zn,interactions:An,permissions:null===In||void 0===In?void 0:In.map((function(n){var e=n.roles,t=n.triggers;return{roles:null===e||void 0===e?void 0:e.map((function(n){return"string"===typeof n?n:null===n||void 0===n?void 0:n.role})),triggers:null===t||void 0===t?void 0:t.map((function(n){return{schedule_interval:n.schedule_interval,schedule_type:n.schedule_type}}))}}))})).then((function(){return Pn()}))}),[Zn,An,In,I,Pn,k,X]),Dn=(0,i.useMemo)((function(){return(null===C||void 0===C?void 0:C.blocks)||[]}),[C]),Sn=(0,i.useMemo)((function(){return null===Dn||void 0===Dn?void 0:Dn.reduce((function(n,e,t){return q(q({},n),{},(0,o.Z)({},String(t),!0))}),{})}),[Dn]);(0,i.useEffect)((function(){"undefined"===typeof A&&!An&&(null===Z||void 0===Z?void 0:Z.length)>=1&&yn((0,D.HK)(Z||[],(function(n){return n.uuid})),{initialBootstrap:!0})}),[Z,An,A,yn]),(0,i.useEffect)((function(){"undefined"===typeof m&&!Zn&&null!==I&&void 0!==I&&I.blocks&&jn(null===I||void 0===I?void 0:I.blocks,{initialBootstrap:!0})}),[Zn,m,I,jn]),(0,i.useEffect)((function(){!In&&null!==I&&void 0!==I&&I.permissions&&Cn(null===I||void 0===I?void 0:I.permissions,{initialBootstrap:!0})}),[In,I,Cn]);var kn=(0,i.useMemo)((function(){var n=[],e=(null===Dn||void 0===Dn?void 0:Dn.length)||0;return null===Dn||void 0===Dn||Dn.map((function(t,o){var r=(t||{uuid:null}).uuid,i=(null===Zn||void 0===Zn?void 0:Zn[r])||[],c=(null===i||void 0===i?void 0:i.length)>=1,u=(0,S.jsxs)(a.ZP,{beforeIcon:c?(0,S.jsx)(x.I8,{}):(0,S.jsx)(x.mm,{}),compact:!0,onClick:function(n){(0,_.j)(n),W(t)},primary:!c,secondary:c,small:!0,children:[c&&"Edit interactions",!c&&"Add interactions"]});n.push((0,S.jsx)(l.Z,{first:0==o,noBorderRadius:o>=1,noPaddingContent:!0,titleXPadding:y.cd*y.iI,titleYPadding:1.5*y.iI,title:(0,S.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,S.jsx)(g.Z,{mr:y.cd,py:1,children:(0,S.jsx)(w.ZP,{large:!0,monospace:!0,children:r})}),c&&(0,S.jsx)(p.ZP,{alignItems:"center",children:u})]}),children:(0,S.jsx)(O,{noBackground:!0,noBorderRadiusBottom:o<e-1,noBorderRadiusTop:!0,children:(0,S.jsxs)(g.Z,{p:y.cd,children:[!c&&u,null===i||void 0===i?void 0:i.map((function(n,e){return(0,S.jsx)(g.Z,{mt:e>=1?y.HN:0,children:(0,S.jsx)(d.Z,{blockInteraction:n,containerWidth:v,containerRef:F,interaction:null===An||void 0===An?void 0:An[null===n||void 0===n?void 0:n.uuid],setInteractionsMapping:yn,showVariableUUID:!0})},"".concat(null===n||void 0===n?void 0:n.uuid,"-").concat(e))}))]})})},r))})),n}),[Dn,F,v,An,jn,yn,W]),Nn=(0,i.useMemo)((function(){return(null===Dn||void 0===Dn?void 0:Dn.length)>=1&&(0,S.jsx)(c.Z,{noBackground:!0,noBorder:!0,noBoxShadow:!0,visibleMapping:Sn,children:kn})}),[Dn,kn,Sn]),Ln=(0,i.useMemo)((function(){return(null===Zn||void 0===Zn?void 0:Zn[null===N||void 0===N?void 0:N.uuid])||[]}),[Zn,N]),wn=(0,i.useMemo)((function(){var n=[],e={};return null===Ln||void 0===Ln||Ln.forEach((function(t){var o=t.uuid,r=null===An||void 0===An?void 0:An[o],i=null===r||void 0===r?void 0:r.variables;Object.keys(i||{}).forEach((function(t){null!==e&&void 0!==e&&e[t]||(n.push(t),e[t]=!0)}))})),n}),[An,Ln]),Mn=(0,i.useMemo)((function(){var n=(null===Ln||void 0===Ln?void 0:Ln.length)>=1;return(0,S.jsxs)(p.ZP,{alignItems:"center",children:[!an&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(a.ZP,{beforeIcon:(0,S.jsx)(x.mm,{}),compact:n,onClick:function(n){(0,_.j)(n),sn(!0),setTimeout((function(){var n;return null===z||void 0===z||null===(n=z.current)||void 0===n?void 0:n.focus()}),1)},primary:!0,small:n,children:"Create new set of interactions"})}),an&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(B.Z,{compact:!0,monospace:!0,onChange:function(n){(0,_.j)(n),dn(n.target.value)},onClick:function(n){return(0,_.j)(n)},ref:z,small:!0,value:ln||""}),(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(a.ZP,{compact:n,loading:j,onClick:function(n){(0,_.j)(n),b({block_uuid:null===N||void 0===N?void 0:N.uuid,inputs:{},layout:[],uuid:"".concat(ln,".").concat(u.t6.YAML),variables:{}}).then((function(n){var e=n.data.interaction,t=null===e||void 0===e?void 0:e.uuid;En(null===N||void 0===N?void 0:N.uuid,(null===Ln||void 0===Ln?void 0:Ln.length)||0,{uuid:t}),yn((function(n){return q(q({},n),{},(0,o.Z)({},t,e))})),setTimeout((function(){var n;null===G||void 0===G||null===(n=G.current)||void 0===n||n.scrollIntoView()}),l.e+100)})),sn(!1),pn(ln),dn(null)},primary:!0,small:n,children:"Save interaction"}),(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(a.ZP,{compact:n,onClick:function(n){(0,_.j)(n),sn(!1),dn(null)},secondary:!0,small:n,children:"Cancel"})]})]})}),[N,Ln,an,j,ln,yn,sn,pn,dn,En]);return(0,S.jsxs)(g.Z,{p:y.cd,style:{position:"relative"},children:[(0,S.jsxs)(g.Z,{pb:y.cd,ref:F,children:[!N&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g.Z,{mb:y.cd,children:(0,S.jsx)(h.Z,{children:"Blocks with interactions"})}),Nn,(0,S.jsxs)(g.Z,{mb:y.cd,mt:y.HN,children:[(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(h.Z,{children:"Permissions"}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(p.ZP,{alignItems:"center",children:(0,S.jsx)(a.ZP,{beforeIcon:(0,S.jsx)(x.mm,{}),compact:!0,onClick:function(){return Cn((function(n){return n.concat([{roles:[],triggers:[]}])}))},secondary:!0,small:!0,children:"Add permission"})})]}),(0,S.jsx)(g.Z,{mt:1,children:(0,S.jsx)(w.ZP,{default:!0,children:"Add permissions to allow specific user roles the ability to trigger this pipeline using the interactions for this pipeline."})})]}),null===In||void 0===In?void 0:In.map((function(n,e){return(0,S.jsx)(g.Z,{mt:e>=1?y.cd:0,children:(0,S.jsx)(L,{index:e,permission:n,setPermissions:Cn,updatePermission:function(n){var t=(0,r.Z)(In);t[e]=n,Cn(t)}})},"permission-".concat(e))}))]}),N&&(0,S.jsxs)(g.Z,{mb:y.Mq,children:[(0,S.jsxs)(g.Z,{mb:y.Mq,children:[(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(g.Z,{mr:y.cd,py:1,children:(0,S.jsx)(h.Z,{children:"Block interactions"})}),(null===Ln||void 0===Ln?void 0:Ln.length)>=1&&Mn]}),(0,S.jsx)(w.ZP,{default:!0,children:"A block can have multiple sets of interactions associated with it."})]}),!(null!==Ln&&void 0!==Ln&&Ln.length)&&Mn,(null===wn||void 0===wn?void 0:wn.length)>=1&&(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(w.ZP,{bold:!0,large:!0,children:"Variables"}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(f.Z,{alignItems:"center",flex:1,children:null===wn||void 0===wn?void 0:wn.map((function(n,e){return(0,S.jsx)(g.Z,{mr:1,children:(0,S.jsxs)(w.ZP,{default:!0,monospace:!0,children:[n,(null===wn||void 0===wn?void 0:wn.length)>=2&&e<(null===wn||void 0===wn?void 0:wn.length)-1&&(0,S.jsx)(w.ZP,{inline:!0,monospace:!0,muted:!0,children:","})]})},n)}))})]})]}),null===Ln||void 0===Ln?void 0:Ln.map((function(n,e){var t,o=n||{description:null,name:null},r=o.description,i=o.name,c=null===N||void 0===N?void 0:N.uuid,l=null===n||void 0===n?void 0:n.uuid,u=null===An||void 0===An?void 0:An[l];return(0,S.jsxs)("div",{children:[e>=1&&(0,S.jsx)(g.Z,{my:y.HN,children:(0,S.jsx)(s.Z,{light:!0})}),(0,S.jsx)(d.Z,{blockInteraction:n,containerRef:F,containerWidth:v,interaction:u,isEditing:!0,removeBlockInteraction:function(){return En(c,e,n,{remove:!0})},setInteractionsMapping:yn,children:(0,S.jsxs)(g.Z,{p:y.cd,children:[(0,S.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,S.jsxs)(g.Z,{mb:1,style:{width:20*y.iI},children:[(0,S.jsx)(w.ZP,{bold:!0,large:!0,children:"Label"}),(0,S.jsxs)(w.ZP,{muted:!0,children:["Add a label for this",(0,S.jsx)("br",{}),"set of interactions."]})]}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(f.Z,{flex:1,children:(0,S.jsx)(B.Z,{fullWidth:!0,onChange:function(n){return En(c,e,{name:n.target.value})},value:i||""})})]}),(0,S.jsx)(g.Z,{mb:y.cd}),(0,S.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,S.jsxs)(g.Z,{mb:1,style:{width:20*y.iI},children:[(0,S.jsx)(w.ZP,{bold:!0,large:!0,children:"Description"}),(0,S.jsxs)(w.ZP,{muted:!0,children:["Describe how these",(0,S.jsx)("br",{}),"interactions are used."]})]}),(0,S.jsx)(g.Z,{mr:y.cd}),(0,S.jsx)(f.Z,{flex:1,children:(0,S.jsx)(M.Z,{fullWidth:!0,onChange:function(n){return En(c,e,{description:n.target.value})},rows:Math.max(3,Math.min(12,null===r||void 0===r||null===(t=r.split("\n"))||void 0===t?void 0:t.length)),value:r||""})})]})]})}),(0,S.jsx)("div",{ref:e===(null===Ln||void 0===Ln?void 0:Ln.length)-1?G:null})]},"".concat(null===n||void 0===n?void 0:n.uuid,"-").concat(e))}))]}),(0,S.jsx)(E,{ref:P,width:(null===F||void 0===F||null===(e=F.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)||null,children:(0,S.jsx)(g.Z,{p:y.cd,children:(0,S.jsxs)(p.ZP,{alignItems:"center",children:[(0,S.jsx)(a.ZP,{beforeIcon:(0,S.jsx)(x.vc,{}),loading:T,onClick:function(){return _n()},primary:on,secondary:!on,children:"Save changes for all interactions"}),(0,S.jsx)(g.Z,{mr:y.cd}),on&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.uy,{warning:!0}),(0,S.jsx)(g.Z,{mr:1}),(0,S.jsx)(w.ZP,{warning:!0,children:"You have unsaved interaction changes"})]}),!on&&Q&&(0,S.jsxs)(w.ZP,{muted:!0,children:["Interactions last saved at ",(0,H.JX)(Number(Q)/1e3)]})]})})})]})}},44425:function(n,e,t){t.d(e,{$W:function(){return g},DA:function(){return m},HX:function(){return A},J8:function(){return Z},L8:function(){return l},LE:function(){return f},Lk:function(){return T},Lq:function(){return p},M5:function(){return h},Q3:function(){return x},Qj:function(){return j},Ut:function(){return E},V4:function(){return O},VZ:function(){return b},dO:function(){return s},f2:function(){return R},iZ:function(){return y},t6:function(){return d},tf:function(){return a}});var o,r,i,c,l,d,u=t(82394);!function(n){n.CONDITION="condition",n.DBT_SNAPSHOT="snapshot",n.DYNAMIC="dynamic",n.DYNAMIC_CHILD="dynamic_child",n.REDUCE_OUTPUT="reduce_output",n.REPLICA="replica"}(l||(l={})),function(n){n.MARKDOWN="markdown",n.PYTHON="python",n.R="r",n.SQL="sql",n.YAML="yaml"}(d||(d={}));var a,s=(o={},(0,u.Z)(o,d.MARKDOWN,"MD"),(0,u.Z)(o,d.PYTHON,"PY"),(0,u.Z)(o,d.R,"R"),(0,u.Z)(o,d.SQL,"SQL"),(0,u.Z)(o,d.YAML,"YAML"),o),f=(r={},(0,u.Z)(r,d.MARKDOWN,"Markdown"),(0,u.Z)(r,d.PYTHON,"Python"),(0,u.Z)(r,d.R,"R"),(0,u.Z)(r,d.SQL,"SQL"),(0,u.Z)(r,d.YAML,"YAML"),r);!function(n){n.CALLBACK="callback",n.CHART="chart",n.CONDITIONAL="conditional",n.CUSTOM="custom",n.DATA_EXPORTER="data_exporter",n.DATA_LOADER="data_loader",n.DBT="dbt",n.EXTENSION="extension",n.GLOBAL_DATA_PRODUCT="global_data_product",n.SCRATCHPAD="scratchpad",n.SENSOR="sensor",n.MARKDOWN="markdown",n.TRANSFORMER="transformer"}(a||(a={}));var p,h=[a.CALLBACK,a.CONDITIONAL,a.EXTENSION];!function(n){n.BLUE="blue",n.GREY="grey",n.PINK="pink",n.PURPLE="purple",n.TEAL="teal",n.YELLOW="yellow"}(p||(p={}));var m,v,g=[a.CHART,a.CUSTOM,a.DATA_EXPORTER,a.DATA_LOADER,a.SCRATCHPAD,a.SENSOR,a.MARKDOWN,a.TRANSFORMER],x=[a.CUSTOM,a.DATA_EXPORTER,a.DATA_LOADER,a.SCRATCHPAD,a.SENSOR,a.MARKDOWN,a.TRANSFORMER],b=[a.DATA_EXPORTER,a.DATA_LOADER],Z=[a.DATA_EXPORTER,a.DATA_LOADER,a.TRANSFORMER],A=[a.DATA_EXPORTER,a.DATA_LOADER,a.DBT,a.TRANSFORMER],j=[a.CHART,a.SCRATCHPAD,a.SENSOR,a.MARKDOWN],y=[a.CALLBACK,a.CHART,a.EXTENSION,a.SCRATCHPAD,a.MARKDOWN],T=[a.CUSTOM,a.DATA_EXPORTER,a.DATA_LOADER,a.SENSOR,a.TRANSFORMER];!function(n){n.EXECUTED="executed",n.FAILED="failed",n.NOT_EXECUTED="not_executed",n.UPDATED="updated"}(m||(m={})),function(n){n.BLOCK_FILE="block_file",n.CUSTOM_BLOCK_TEMPLATE="custom_block_template",n.MAGE_TEMPLATE="mage_template"}(v||(v={}));var R=[a.CUSTOM,a.DATA_EXPORTER,a.DATA_LOADER,a.TRANSFORMER],O=(i={},(0,u.Z)(i,a.CALLBACK,"Callback"),(0,u.Z)(i,a.CHART,"Chart"),(0,u.Z)(i,a.CONDITIONAL,"Conditional"),(0,u.Z)(i,a.CUSTOM,"Custom"),(0,u.Z)(i,a.DATA_EXPORTER,"Data exporter"),(0,u.Z)(i,a.DATA_LOADER,"Data loader"),(0,u.Z)(i,a.DBT,"DBT"),(0,u.Z)(i,a.EXTENSION,"Extension"),(0,u.Z)(i,a.GLOBAL_DATA_PRODUCT,"Global data product"),(0,u.Z)(i,a.MARKDOWN,"Markdown"),(0,u.Z)(i,a.SCRATCHPAD,"Scratchpad"),(0,u.Z)(i,a.SENSOR,"Sensor"),(0,u.Z)(i,a.TRANSFORMER,"Transformer"),i),E=[a.DATA_LOADER,a.TRANSFORMER,a.DATA_EXPORTER,a.SENSOR];c={},(0,u.Z)(c,a.DATA_EXPORTER,"DE"),(0,u.Z)(c,a.DATA_LOADER,"DL"),(0,u.Z)(c,a.SCRATCHPAD,"SP"),(0,u.Z)(c,a.SENSOR,"SR"),(0,u.Z)(c,a.MARKDOWN,"MD"),(0,u.Z)(c,a.TRANSFORMER,"TF")},30229:function(n,e,t){t.d(e,{PN:function(){return l},TR:function(){return h},U5:function(){return u},Wb:function(){return p},Xm:function(){return i},Z4:function(){return a},fq:function(){return d},gm:function(){return s},kJ:function(){return f}});var o,r,i,c=t(82394),l="__bookmark_values__";!function(n){n.API="api",n.EVENT="event",n.TIME="time"}(i||(i={}));var d,u,a=(o={},(0,c.Z)(o,i.API,(function(){return"API"})),(0,c.Z)(o,i.EVENT,(function(){return"event"})),(0,c.Z)(o,i.TIME,(function(){return"schedule"})),o);!function(n){n.ACTIVE="active",n.INACTIVE="inactive"}(d||(d={})),function(n){n.ONCE="@once",n.HOURLY="@hourly",n.DAILY="@daily",n.WEEKLY="@weekly",n.MONTHLY="@monthly",n.ALWAYS_ON="@always_on"}(u||(u={}));var s,f,p=[u.ONCE,u.HOURLY,u.DAILY,u.WEEKLY,u.MONTHLY];!function(n){n.INTERVAL="frequency[]",n.STATUS="status[]",n.TAG="tag[]",n.TYPE="type[]"}(s||(s={})),function(n){n.CREATED_AT="created_at",n.NAME="name",n.PIPELINE="pipeline_uuid",n.STATUS="status",n.TYPE="schedule_type"}(f||(f={}));var h=(r={},(0,c.Z)(r,f.CREATED_AT,"Created at"),(0,c.Z)(r,f.NAME,"Name"),(0,c.Z)(r,f.PIPELINE,"Pipeline"),(0,c.Z)(r,f.STATUS,"Active"),(0,c.Z)(r,f.TYPE,"Type"),r)}}]);