import{d as A,X as D,R as E,M as k,g as d,h as y,$ as P,a0 as J,a1 as $,j as c,c as n,k as u,o as t,n as l,u as e,a2 as G,m as v,N as K,F as b,a3 as O,q as g,a4 as Q,a as i,P as V,a5 as W,a6 as Y,a7 as Z,a8 as ee,a9 as te,aa as oe,ab as se,H as le,t as ae,ac as ne}from"./index-GJzhUb-m.js";import{u as ue}from"./usePageTitle-jPdynRKY.js";const re={class:"flow-runs__list"},de={class:"flow-runs__subflows-toggle"},F=3e4,fe=A({__name:"FlowRuns",setup(ce){const h=D(),f=E(),p=k(f.flowRuns.getFlowRunsCount,[{}]),C=d(()=>p.executed),N=d(()=>p.response===0),m=y(),x=P(m,1200),{filter:o,isCustomFilter:S}=J({flowRuns:{nameLike:x}}),w=d({get(){return o.flowRuns.parentTaskRunIdNull},set(R){o.flowRuns.parentTaskRunIdNull=R?!0:void 0}}),B=k(f.ui.getFlowRunHistory,[o],{interval:F}),T=d(()=>B.response??[]),{flowRuns:_,total:H,subscriptions:U,next:I}=$(o,{mode:"infinite",interval:F}),r=y([]);function L(){h.push(ne.flowRuns())}const M=()=>{r.value=[],U.refresh()};return ue("Flow Runs"),(R,s)=>{const X=c("p-toggle"),j=c("p-list-header"),q=c("p-button"),z=c("p-layout-default");return t(),n(z,{class:"flow-runs"},{header:u(()=>[l(e(G))]),default:u(()=>[C.value?(t(),v(b,{key:0},[N.value?(t(),n(e(K),{key:0})):(t(),v(b,{key:1},[l(e(O)),e(g).md?(t(),n(e(Q),{key:0,history:T.value,"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):i("",!0),V("div",re,[l(j,{sticky:""},{controls:u(()=>[V("div",de,[l(X,{modelValue:w.value,"onUpdate:modelValue":s[0]||(s[0]=a=>w.value=a),append:"Hide subflows"},null,8,["modelValue"])]),e(g).md?(t(),n(e(W),{key:0,modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0)]),sort:u(()=>[l(e(Y),{modelValue:e(o).sort,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).sort=a),class:"flow-runs__sort"},null,8,["modelValue"])]),default:u(()=>[r.value.length==0?(t(),n(e(Z),{key:0,count:e(H),label:"Flow run"},null,8,["count"])):(t(),n(e(ee),{key:1,count:r.value.length},null,8,["count"])),l(e(te),{selected:r.value,onDelete:M},null,8,["selected"])]),_:1}),l(e(oe),{selected:r.value,"onUpdate:selected":s[3]||(s[3]=a=>r.value=a),selectable:"","flow-runs":e(_),onBottom:e(I)},null,8,["selected","flow-runs","onBottom"]),e(_).length?i("",!0):(t(),n(e(se),{key:0},le({_:2},[e(S)?{name:"actions",fn:u(()=>[l(q,{small:"",onClick:L},{default:u(()=>[ae(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{fe as default};
