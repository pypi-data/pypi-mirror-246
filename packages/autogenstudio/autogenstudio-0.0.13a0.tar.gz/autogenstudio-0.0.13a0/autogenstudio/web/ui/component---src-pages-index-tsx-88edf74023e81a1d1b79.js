"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[691],{60652:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var a=s(67294),l=s(30372),n=s(15596),r=s(41173),o=s(91160),i=s(1642),c=s(51446);var m=a.forwardRef((function({title:e,titleId:t,...s},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))})),d=s(99374),u=s(89132),f=s(30240),v=s(71082);var g=()=>{const[e,t]=a.useState({status:!0,message:"All good"}),[s,l]=a.useState(!1),r=((0,f.F)((e=>e.workflowConfig)),(0,f.F)((e=>e.setWorkflowConfig))),{user:c}=a.useContext(o.T),m=`${(0,n.RU)()}/workflows?user_id=${null==c?void 0:c.email}`,[g,E]=a.useState([]),[p,x]=a.useState(0);return a.useEffect((()=>{c&&(t(null),l(!0),(0,n.ZV)(m,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(i.ZP.success(e.message),E(e.data),e.data.length>0&&r(e.data[0])):i.ZP.error(e.message),l(!1)}),(e=>{t(e),i.ZP.error(e.message),l(!1)})))}),[]),a.createElement("div",{className:" mb-4 relative"},a.createElement("div",{className:"font-semibold pb-2 border-b"},"Agent Workflow "),a.createElement("div",{className:"text-xs mt-2 mb-2 pb-1  "}," ","Select or create an agent workflow."," "),a.createElement("div",{className:"relative mt-2 "},a.createElement(u.fz,{loading:s}),g&&g.length>0&&a.createElement(d.Z,{className:"w-full",value:g[p].name,onChange:e=>{x(e),r(g[e])},options:g.map(((e,t)=>({label:e.name,value:t})))}),a.createElement("div",{className:"mt-2 text-xs"}," ","Create new workflows"," ",a.createElement("span",{className:"text-accent"}," ",a.createElement(v.Link,{to:"/build"},"here"))," ")),!g||g&&0===g.length&&a.createElement("div",{className:"p-1 border rounded text-xs px-2 text-secondary"}," ","No agent workflows found."))},E=s(78680);var p=e=>{let{}=e;const[t,s]=a.useState(!1),[l,r]=a.useState({status:!0,message:"All good"}),{user:c}=a.useContext(o.T),m=(0,n.RU)(),d=`${m}/sessions?user_id=${null==c?void 0:c.email}`,v=`${m}/sessions`,g=`${m}/sessions/publish`,p=(0,f.F)((e=>e.sessions)),x=(0,f.F)((e=>e.workflowConfig)),h=(0,f.F)((e=>e.setSessions)),w=(0,f.F)((e=>e.session)),N=(0,f.F)((e=>e.setSession));a.useEffect((()=>{p&&p.length>0&&N(p[0])}),[p]);const b=()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:null===w?{user_id:null==c?void 0:c.email,flow_config:x,session_id:null}:w},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,n.ZV)(v,t,(e=>{e&&e.status?(i.ZP.success(e.message),h(e.data)):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))};a.useEffect((()=>{c&&(r(null),s(!0),(0,n.ZV)(d,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(i.ZP.success(e.message),h(e.data),e.data&&0===e.data.length&&b()):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)})))}),[]);const k=p.map(((e,t)=>{const l=(null==w?void 0:w.id)===e.id?"bg-accent text-white":"bg-secondary text-primary";return a.createElement("div",{key:"sessionsrow"+t,className:"  mb-2 pb-1   "},a.createElement("div",{className:`rounded p-2 cursor-pointer ${l}`,role:"button",onClick:()=>{N(e)}},a.createElement("div",{className:"text-xs"},(0,n.aF)(e.id,27)),a.createElement("div",{className:"text-xs text-right "},(0,n.Sy)(e.timestamp)," ")),a.createElement("div",{className:"flex mt-1 text-secondary"},a.createElement("div",{className:"flex-1"}),a.createElement("div",{role:"button",onClick:()=>{(()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:w,tags:["published"]},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,n.ZV)(g,t,(e=>{e&&e.status?i.ZP.success(e.message):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})()},className:"text-xs px-2  hover:text-accent cursor-pointer"}," ","publish"," ")))}));let Z,y;return"undefined"!=typeof window&&(Z=window.innerHeight,y=Z-400+"px"),a.createElement("div",{className:"  "},a.createElement("div",{className:"mb-2 relative"},a.createElement("div",{className:""},a.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},"Sessions "),a.createElement("div",{className:"text-xs mb-2 pb-1  "}," ","Create a new session or select an existing session to view chat."),a.createElement("div",{style:{maxHeight:"300px"},className:"mb-4 overflow-y-scroll scroll rounded relative "},a.createElement(u.fz,{loading:t}),k),(!p||0==p.length)&&a.createElement("div",{className:"text-xs text-gray-500"},"No sessions found. Create a new session to get started.")),a.createElement("div",{className:"flex gap-x-2"},a.createElement("div",{className:"flex-1"}),a.createElement(u.Cw,{className:"text-sm p-2 px-3",onClick:()=>{b()}}," ",a.createElement(E.Z,{className:"w-5 h-5 inline-block mr-1"}),"New"))))};var x=()=>{const[e,t]=a.useState(!0),s=e?"270px":"50px";let l,n;"undefined"!=typeof window&&(l=window.innerHeight,n=l-180+"px");const r=(0,f.F)((e=>e.workflowConfig));return a.createElement("div",{style:{minWidth:s,maxWidth:s,height:"calc(100vh - 190px)"},className:"    "},a.createElement("div",{className:" transition overflow-hidden duration-300  flex flex-col   h-full p-2 overflow-y-scroll scroll rounded "},a.createElement("div",{className:(e?"":"hidden")+"  "},a.createElement(g,null),r&&a.createElement(p,null))),a.createElement("div",{onClick:()=>t(!e),role:"button",className:" hover:text-accent duration-150  "},e?a.createElement("div",{className:"mt-4  "}," ",a.createElement(c.Z,{className:"w-6 h-6  inline-block    rounded"})," ",a.createElement("span",{className:"text-xs "}," close sidebar")):a.createElement(m,{className:"w-6 h-6   inline-block   font-bold rounded "})))};var h=()=>{const e=(0,f.F)((e=>e.session)),[t,s]=a.useState(!1),[l,c]=a.useState(null),[m,d]=a.useState("default"),[u,v]=a.useState(null);a.useEffect((()=>{(0,n.qQ)("ara_config",u)}),[u]);const[g,E]=a.useState({status:!0,message:"All good"}),{user:p}=a.useContext(o.T),h=`${(0,n.RU)()}/messages?user_id=${null==p?void 0:p.email}&session_id=${null==e?void 0:e.id}`;return a.useEffect((()=>{p&&e&&(E(null),s(!0),c(null),(0,n.ZV)(h,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(c(e.data),i.ZP.success(e.message)):i.ZP.error(e.message),s(!1)}),(e=>{E(e),i.ZP.error(e.message),s(!1)})))}),[e]),a.createElement("div",{className:"h-full   "},a.createElement("div",{className:"flex h-full   "},a.createElement("div",{className:"  mr-2  rounded"},a.createElement(x,null)),a.createElement("div",{className:" flex-1  "}," ",a.createElement(r.Z,{initMessages:l}))))};var w=e=>{let{data:t}=e;return a.createElement(l.Z,{meta:t.site.siteMetadata,title:"Home",link:"/"},a.createElement("main",{style:{height:"100%"},className:" h-full "},a.createElement(h,null)))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-88edf74023e81a1d1b79.js.map