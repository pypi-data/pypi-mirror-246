{"version":3,"file":"main.AutoComplete_LinoToolbar.8b523cbac30f48759d7c.js","mappings":"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","sources":["webpack://lino_react/./node_modules/decode-uri-component/index.js","webpack://lino_react/./node_modules/filter-obj/index.js","webpack://lino_react/./node_modules/split-on-first/index.js","webpack://lino_react/./node_modules/strict-uri-encode/index.js","webpack://lino_react/./lino_react/react/components/AutoComplete.tsx","webpack://lino_react/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://lino_react/./node_modules/@babel/runtime/helpers/esm/superPropBase.js"],"sourcesContent":["'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher) || [];\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","export const name: string = \"AutoComplete\";\nimport * as t from './types';\n\n// @ts-ignore\nimport React from \"react\";\n// @ts-ignore\nimport PropTypes from \"prop-types\";\nimport { RegisterImportPool } from \"./Base\";\nimport { LeafComponentInput } from \"./LinoComponentUtils\";\nimport * as constants from \"./constants\";\n\nlet ex; const exModulePromises = ex = {\n    // @ts-ignore\n    queryString: import(/* webpackChunkName: \"queryString_AutoComplete\" */\"query-string\"),\n    // @ts-ignore\n    prAutoComplete: import(/* webpackChunkName: \"prAutoComplete_AutoComplete\" */\"primereact/autocomplete\"),\n}\nRegisterImportPool(ex);\n\n\nexport class AutoComplete extends LeafComponentInput {\n    static requiredModules = ['prAutoComplete'].concat(LeafComponentInput.requiredModules);\n    static iPool = Object.assign(ex, LeafComponentInput.iPool.copy());\n\n    hasClearButton: boolean;\n    clear?: () => void;\n    props: t.LeafInputProps;\n    choicesURL?(query: string, start: number, limit: number): string;\n    clearButton?: any;\n    onSelect?(e: any): void;\n    scroller: any;\n\n    constructor(props: t.LeafInputProps) {\n        super(props);\n        this.state = {\n            ...this.state,\n            [constants.URL_PARAM_FILTER]: \"\",\n            [constants.URL_PARAM_LIMIT]: 15,\n            [constants.URL_PARAM_START]: 0,\n            lazyLoading: false,\n            rows: [],\n            value: null,\n        }\n\n        this.hasClearButton = false;\n\n        this.getChoices = this.getChoices.bind(this);\n        this.getInput = this.getInput.bind(this);\n        this.itemTemplate = this.itemTemplate.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n    }\n\n    onReady() {\n        if (this.hasClearButton && !this.clear) throw \"clear NotImplemented\";\n        let v = this.getValue();\n        this.setState({\n            [constants.URL_PARAM_FILTER]: v.text,\n            [constants.URL_PARAM_LIMIT]: this.props.urlParams[\n                constants.URL_PARAM_LIMIT],\n            value: v,\n        });\n    }\n\n    onKeyDown = (event) => {\n        if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n            if (this.inputEl && !this.inputEl.state.overlayVisible) {\n                if (!this.state.rows.length) this.getChoices(this.state[constants.URL_PARAM_FILTER]);\n                this.inputEl.setState({overlayVisible: true})\n            } else if (!this.state.lazyLoading) {\n                let sItem = this.scroller.content.querySelector('li.p-highlight');\n                if (sItem) {\n                    let {top, bottom} = this.scroller.element.getBoundingClientRect();\n                    let sItemRect = sItem.getBoundingClientRect();\n\n                    if (sItemRect.top < top) sItem.scrollIntoView(true)\n                    else if (sItemRect.bottom > bottom) sItem.scrollIntoView(false);\n                }\n            }\n            event.stopPropagation();\n        }\n    }\n\n    itemTemplate = (item) => {\n        let i = typeof item === \"object\" ? item.text : item;\n        return <div dangerouslySetInnerHTML={{__html: i || \"\\u00a0\"}}/>\n    }\n\n    getChoices = (query: string, limit?: number) => {\n        limit = limit || this.state[constants.URL_PARAM_LIMIT];\n        let start = limit === this.state[constants.URL_PARAM_LIMIT]\n            ? this.state[constants.URL_PARAM_START]\n            : this.state[constants.URL_PARAM_LIMIT];\n        this.props.urlParams.controller.actionHandler.silentFetch({\n            path: this.choicesURL(query, start, limit)}\n        ).then((data) => {\n            let rows = data.rows;\n            if (this.state.rows.length) {\n                rows = rows.filter(row => row.text !== \"\" && row.value !== null);\n            }\n            this.setState({\n                [constants.URL_PARAM_FILTER]: query,\n                [constants.URL_PARAM_LIMIT]: limit,\n                count: data.count,\n                lazyLoading: false,\n                rows: this.state.rows.concat(rows),\n            });\n        });\n    }\n\n    getInput(customProps = {}) {\n        if (this.state.value === null) return null;\n        return <React.Fragment><this.ex.prAutoComplete.AutoComplete\n            completeMethod={(e) => this.getChoices(\n                e.query,\n                this.state[constants.URL_PARAM_LIMIT]\n            )}\n            dropdown={true}\n            field=\"text\"\n            itemTemplate={this.itemTemplate}\n            onChange={e => this.setState({\n                value: Object.assign(this.state.value, {\n                    text: e.value, value: null}),\n                rows: [],\n                [constants.URL_PARAM_LIMIT]: this.props.urlParams[\n                    constants.URL_PARAM_LIMIT],\n            })}\n            onSelect={this.onSelect}\n            onShowLoader={() => {\n                if (this.clearButton) {\n                    this.clearButton.style.visibility = 'hidden'\n                }\n            }}\n            ref={this.onInputRef}\n            scrollHeight=\"200px\"\n            suggestions={this.state.rows}\n            tabIndex={this.props.tabIndex}\n            value={this.state.value.text}\n            virtualScrollerOptions={{\n                itemSize: this.props.urlParams[constants.URL_PARAM_LIMIT],\n                lazy: this.state.count > this.state[constants.URL_PARAM_LIMIT],\n                loading: this.state.lazyLoading,\n                onScrollIndexChange: (event) => {\n                    let l = this.state[constants.URL_PARAM_LIMIT];\n                    if (l - event.first < 15 && !this.state.lazyLoading\n                        && this.state.count > l\n                    ) {\n                        this.setState({lazyLoading: true});\n                        this.getChoices(\n                            this.state[constants.URL_PARAM_FILTER], l + 15);\n                    }\n                },\n                ref: el => this.scroller = el,\n                scrollHeight: \"195px\",\n                style: {minWidth: '30ch'},\n            }}\n            {...customProps}/>\n            {this.hasClearButton && this.props.elem.field_options.allowBlank\n                && this.state.value.text\n                && <i key={this.state.touch} ref={el => this.clearButton = el}\n                className={\"pi pi-times l-fk-clear\"}\n                onClick={this.clear}\n                style={{visibility: 'visible', cursor: \"pointer\"}}/>}\n        </React.Fragment>\n    }\n}\n\ntype QuickFilterProps = t.LeafInputProps & {\n    wide: boolean;\n}\n\nexport class QuickFilter extends AutoComplete {\n    static requiredModules = ['queryString'].concat(AutoComplete.requiredModules);\n\n    static propTypes = {\n        ...AutoComplete.propTypes,\n        wide: PropTypes.bool,\n    }\n\n    static defaultProps = {\n        ...AutoComplete.defaultProps,\n        editing_mode: true,\n        elem: {},\n        tabIndex: 0,\n        wide: false,\n        [constants.URL_PARAM_WINDOW_TYPE]: constants.WINDOW_TYPE_UNKNOWN,\n    }\n\n    props: QuickFilterProps;\n\n    constructor(props: QuickFilterProps) {\n        super(props);\n        this.wrapperClasses = [\"l-grid-quickfilter\"];\n        this.styleClasses = [];\n\n        this.choicesURL = this.choicesURL.bind(this);\n        this.getInput = this.getInput.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.onSelect = this.onSelect.bind(this);\n    }\n\n    getInput() {\n        return super.getInput({\n            placeholder: \"QuickSearch\",\n            style: {\n                width: this.props.wide ? \"100%\" : undefined,\n                marginRight: this.props.wide ? \"1ch\" : undefined,\n                marginLeft: this.props.wide ? \"1ch\" : undefined,\n            }\n        })\n    }\n\n    getValue() {\n        return {text: this.props.urlParams[constants.URL_PARAM_FILTER],\n            value: null}\n    }\n\n    choicesURL(query, start, limit) {\n        return `choices/${this.props.urlParams.packId}/${this.props.urlParams.actorId}?${\n            this.ex.queryString.stringify(Object.assign(this.props.urlParams.controller\n                .actionHandler.defaultStaticParams(), {\n                    [constants.URL_PARAM_FILTER]: query,\n                    [constants.URL_PARAM_START]: start,\n                    [constants.URL_PARAM_LIMIT]: limit\n                }))}`;\n    }\n\n    onSelect(event) {\n        let pk = event.value.value,\n            c = this.props.urlParams.controller;\n        c.history.pushPath({\n            pathname: `/api/${this.props.urlParams.packId}/${this.props.urlParams.actorId}/${pk}`,\n            params: c.actionHandler.defaultStaticParams(),\n        });\n    }\n\n    render() {\n        if (!this.state.ready) return null;\n        return this.getInput();\n    }\n}\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}"],"names":["token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","length","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","i","module","exports","encodedURI","TypeError","replace","replaceMap","exec","result","entries","Object","keys","key","customDecodeURIComponent","obj","predicate","ret","isArr","isArray","val","indexOf","string","separator","separatorIndex","str","encodeURIComponent","x","charCodeAt","toString","toUpperCase","name","ex","queryString","prAutoComplete","RegisterImportPool","AutoComplete","LeafComponentInput","constructor","props","super","onKeyDown","event","this","inputEl","state","overlayVisible","rows","getChoices","constants","URL_PARAM_FILTER","setState","lazyLoading","sItem","scroller","content","querySelector","top","bottom","element","getBoundingClientRect","sItemRect","scrollIntoView","stopPropagation","itemTemplate","item","text","dangerouslySetInnerHTML","__html","query","limit","start","URL_PARAM_LIMIT","URL_PARAM_START","urlParams","controller","actionHandler","silentFetch","path","choicesURL","then","data","filter","row","value","count","hasClearButton","bind","getInput","onReady","clear","v","getValue","customProps","Fragment","completeMethod","e","dropdown","field","onChange","assign","onSelect","onShowLoader","clearButton","style","visibility","ref","onInputRef","scrollHeight","suggestions","tabIndex","virtualScrollerOptions","itemSize","lazy","loading","onScrollIndexChange","l","first","el","minWidth","elem","field_options","allowBlank","touch","className","onClick","cursor","requiredModules","iPool","copy","QuickFilter","wrapperClasses","styleClasses","placeholder","width","wide","undefined","marginRight","marginLeft","packId","actorId","stringify","defaultStaticParams","pk","c","history","pushPath","pathname","params","render","ready","propTypes","bool","defaultProps","editing_mode","URL_PARAM_WINDOW_TYPE","WINDOW_TYPE_UNKNOWN","_get","Reflect","get","target","property","receiver","base","object","hasOwnProperty","getPrototypeOf","superPropBase","desc","getOwnPropertyDescriptor","arguments","apply"],"sourceRoot":""}